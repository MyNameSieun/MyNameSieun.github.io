---
title: "[Next.js] NextAuth를 사용한 소셜로그인(구글, 카카오, 깃허브)구현하기(작성중)"
categories: [Next.js]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

---

- 지난 포스팅 [[Next.js에서 NextAuth를 사용한 인증 구현하기↗️]](https://mynamesieun.github.io/next.js/Next.js%EC%97%90%EC%84%9C-NextAuth%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%9D%B8%EC%A6%9D-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0/)에서 소셜로그인 기능이 들어가지 않은 로그인 기능을 구현하였다.
- 이번 포스팅에서는 NextAuth를 사용하여 소셜 로그인(구글, 카카오, 깃허브)을 구현해보자.

---

<br>

# 1. NextAuth 설정 파일 만들기

> Next.js 프로젝트의 `pages/api/auth/[...nextauth].js` 파일을 생성한 후, 각 소셜 로그인 제공자의 설정을 추가하면 된다.

```tsx
// pages/api/auth/[...nextauth].js
import NextAuth from "next-auth";
import GoogleProvider from "next-auth/providers/google";
import KakaoProvider from "next-auth/providers/kakao";
import GitHubProvider from "next-auth/providers/github";

const handler = NextAuth({
  providers: [
    // Google 소셜 로그인 설정
    GoogleProvider({
      clientId: process.env.GOOGLE_CLIENT_ID || "",
      clientSecret: process.env.GOOGLE_CLIENT_SECRET || "",
    }),

    // Kakao 소셜 로그인 설정
    KakaoProvider({
      clientId: process.env.KAKAO_CLIENT_ID || "",
      clientSecret: process.env.KAKAO_CLIENT_SECRET || "",
    }),

    // GitHub 소셜 로그인 설정
    GitHubProvider({
      clientId: process.env.GITHUB_CLIENT_ID || "",
      clientSecret: process.env.GITHUB_CLIENT_SECRET || "",
    }),
  ],

  // 사용자가 로그인 후 세션 정보를 커스터마이징할 수 있습니다.
  callbacks: {
    async session({ session, token, user }) {
      session.user.id = token.sub;
      return session;
    },
  },

  // 로그인 후 리다이렉트 경로
  pages: {
    signIn: "/auth/signin",
    signOut: "/auth/signout",
    error: "/auth/error",
  },
});

export { handler as GET, handler as POST };
```

<br><br>

# 2. 환경변수 설정하기

> 각 소셜 로그인 제공자의 Client ID와 Client Secret을 프로젝트의` .env.local` 파일에 설정해야한다.

아래는 `.env.local` 예시이다.

```env
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

KAKAO_CLIENT_ID=your_kakao_client_id
KAKAO_CLIENT_SECRET=your_kakao_client_secret

GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

NEXTAUTH_URL=http://localhost:3000
```

## 2.1 구글 OAuth 설정

① Google Cloud Console에서 새 프로젝트를 생성한다.

② 'OAuth 동의 화면'을 설정하고 '자격 증명'에서 OAuth 2.0 클라이언트 ID를 생성한다.

③ 생성된 Client ID와 Client Secret을 .env.local에 추가합니다.

<br>

## 2.2 카카오 OAuth 설정

① Kakao Developers에서 새 애플리케이션을 생성한다.

② '내 애플리케이션'의 '플랫폼' 설정에서 웹 플랫폼을 추가하고, 리다이렉트 URL을 설정한다.

③ 생성된 Client ID와 Client Secret을 `.env.local`에 추가한다.

<br>

## 2.3 깃허브 OAuth 설정

① GitHub Developer Settings에서 'OAuth Apps'를 생성한다.

② 리다이렉트 URL을 설정하고 Client ID와 Client Secret을 받아온다.

③ `.env.local`에 추가한다.

<br><br>

# 3. 로그인 구현

<br><br>

# 4. 세션 정보 확인하기

```tsx
// pages/index.js
import { useSession, signIn, signOut } from "next-auth/react";

export default function Home() {
  const { data: session } = useSession();

  if (session) {
    return (
      <div>
        <h1>로그인 성공!</h1>
        <p>안녕하세요, {session.user.name}님!</p>
        <button onClick={() => signOut()}>로그아웃</button>
      </div>
    );
  }

  return (
    <div>
      <h1>로그인되지 않았습니다.</h1>
      <button onClick={() => signIn()}>로그인</button>
    </div>
  );
}
```
