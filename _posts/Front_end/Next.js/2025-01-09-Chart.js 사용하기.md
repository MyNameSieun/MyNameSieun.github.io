---
title: "[Next.js] Chart.js 사용하기"
categories: [Next.js]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

---

Chart.js는 JavaScript 기반의 데이터 시각화 라이브러리로, 다양한 차트를 간단하게 그릴 수 있도록 도와준다.

[Chart.js 공식문서 ↗️](https://www.chartjs.org/)

---

<br>

# 1. Chart.js 라이브러리 설치

react-chartjs-2는 Chart.js를 React 컴포넌트 형태로 사용할 수 있도록 도와주는 라이브러리이다.

```shell
yarn add react-chartjs-2 chart.js
```

<br><br>

# 2. BarChart 컴포넌트 구현하기

## 2.1 Chart.js 모듈 등록

> Chart.js는 다양한 차트 유형(e.g, 막대형, 도넛형)을 제공한다. 이 차트를 사용하려면 필요한 모듈을 등록해야 한다.

```tsx
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend,
} from "chart.js";

ChartJS.register(
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
);
```

<br>

## 2.2 데이터와 옵션 설정

> 차트를 그리려면 데이터와 옵션이 필요하다.

```tsx
export const data = {
  labels: ["January", "February", "March"], // X축 라벨
  datasets: [
    {
      label: "Dataset 1",
      data: [10, 20, 30], // 각 라벨에 해당하는 값
      backgroundColor: "rgba(75, 192, 192, 0.2)", // 막대 배경색
      borderColor: "rgba(75, 192, 192, 1)", // 막대 테두리 색
      borderWidth: 1,
    },
  ],
};
```

<br>

## 2.3 커스터마이징

> 차트 옵션을 추가하여 시각적 요소를 커스터마이징할 수도 있다.

```tsx
export const options = {
  responsive: true, // 반응형 차트
  plugins: {
    legend: {
      position: "top", // 범례 위치
    },
    title: {
      display: true,
      text: "Sample Bar Chart", // 차트 제목
    },
  },
};
```

<br>

## 2.4 차트 렌더링

> react-chartjs-2의 Bar 컴포넌트를 사용하여 차트를 렌더링한다.

```tsx
const BarChart: React.FC = () => {
  return <Bar options={options} data={data} />;
};
```

이렇게하면 차트를 구현할 수 있다.

<br><br>

# 3. Chart.js 컴포넌트 구현 코드

## 3.1 BarChart

![](/assets/images/2025/2025-01-09-15-45-29.png)

```tsx
// components/BarChart.tsx
import React from "react";
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend,
} from "chart.js";
import { Bar } from "react-chartjs-2";

ChartJS.register(
  CategoryScale,
  LinearScale,
  BarElement,
  Title,
  Tooltip,
  Legend
);

export const options = {
  responsive: true,
  plugins: {
    legend: {
      position: "top" as const,
    },
    title: {
      display: true,
      text: "Sample Bar Chart",
    },
  },
};

const labels = ["January", "February", "March", "April", "May", "June", "July"];

export const data = {
  labels,
  datasets: [
    {
      label: "Dataset 1",
      data: labels.map(() => Math.floor(Math.random() * 1000)),
      backgroundColor: "rgba(75, 192, 192, 0.2)",
      borderColor: "rgba(75, 192, 192, 1)",
      borderWidth: 1,
    },
  ],
};

const BarChart: React.FC = () => {
  return <Bar options={options} data={data} />;
};

export default BarChart;
```

<br>

## 3.2 DoughnutChart

![](/assets/images/2025/2025-01-09-15-44-50.png)

```tsx
// components/DoughnutChart.tsx
import { Chart as ChartJS, ArcElement, Tooltip, Legend } from "chart.js";
import { Doughnut } from "react-chartjs-2";

// Chart.js 모듈 등록
ChartJS.register(ArcElement, Tooltip, Legend);

// 데이터와 설정
export const data = {
  labels: ["Red", "Yellow", "Blue"],
  datasets: [
    {
      data: [10, 20, 30],
      backgroundColor: ["#FF6384", "#FFCE56", "#36A2EB"],
      hoverBackgroundColor: ["#FF6384", "#FFCE56", "#36A2EB"],
    },
  ],
};

export const options = {
  responsive: true,
  plugins: {
    legend: {
      position: "top" as const,
    },
    tooltip: {
      enabled: true,
    },
  },
};

// DoughnutChart 컴포넌트
const DoughnutChart: React.FC = () => {
  return <Doughnut data={data} options={options} />;
};

export default DoughnutChart;
```

<br><br>

# 4. Next.js 페이지에서 컴포넌트 사용

> ext.js는 기본적으로 서버 사이드 렌더링(SSR)을 지원하지만, 그러나 Chart.js는 DOM 요소에 의존하므로 SSR 환경에서는 오류가 발생할 수 있다.

이를 해결하려면 Next.js의 dynamic import를 사용하여 SSR을 비활성화해야한다.

```tsx
import dynamic from "next/dynamic";

// Dynamic import로 SSR 비활성화
const BarChart = dynamic(() => import("../components/BarChart"), {
  ssr: false,
});

const Home: React.FC = () => {
  return (
    <div>
      <h1>Chart.js with Next.js</h1>
      <BarChart />
    </div>
  );
};

export default Home;
```

<br><br>

# 5. 데이터 동적 로딩

> API에서 데이터를 가져와 차트에 렌더링하려면 React의 useState와 useEffect를 사용하면 된다.

```tsx
import React, { useState, useEffect } from "react";
import { Bar } from "react-chartjs-2";
import { options } from "./chartConfig";

const BarChart: React.FC = () => {
  const [data, setData] = useState<any>(null);

  useEffect(() => {
    // API 호출 예시
    fetch("/api/chart-data")
      .then((response) => response.json())
      .then((data) => {
        setData({
          labels: data.labels,
          datasets: data.datasets,
        });
      });
  }, []);

  if (!data) return <p>Loading...</p>;

  return <Bar options={options} data={data} />;
};

export default BarChart;
```

<br><br>

# 6. Chart.js 스타일링

> 차트를 커스터마이징하려면 `options` 객체를 수정하면 된다.

예를 들어, 텍스트 색상이나 축 스타일을 변경할 수 있다.

```tsx
export const options = {
  responsive: true,
  plugins: {
    legend: {
      position: "top" as const,
      labels: {
        color: "blue",
      },
    },
    title: {
      display: true,
      text: "Custom Chart Title",
      font: {
        size: 20,
      },
    },
  },
  scales: {
    x: {
      ticks: {
        color: "red",
      },
    },
    y: {
      ticks: {
        color: "green",
      },
    },
  },
};
```

<br>
