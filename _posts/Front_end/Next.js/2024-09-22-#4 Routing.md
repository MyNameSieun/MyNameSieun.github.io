---
title: "[Next.js] #4 Routing"
categories: [Next.js]
tag: [Next.js]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

# 1. App router vs Pages route

## 1.1 Next.jsì˜ ë²„ì „ì˜ ì£¼ìš” ë¶„ê¸°ì 

> Next.jsë¥¼ ì±„íƒí•  ë•Œ ì£¼ìš”í•œ ì˜ì‚¬ê²°ì •ì€ "`App router`, `Pages router` ë‘˜ ì¤‘ ì–´ë–¤ routerì„ ì‚¬ìš©í•  ê²ƒì¸ê°€?" ì— ìˆë‹¤.

<br>

`Pages router`ëŠ” page í´ë”ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë¼ìš°íŒ…ì´ ëœë‹¤.

![](/assets/images/2024/2024-03-11-16-35-06.png)

<br>

`app router`ëŠ” app í´ë” ë°‘ì— í´ë”ëª…ì„ ê¸°ë°˜ìœ¼ë¡œ ìë™ ë¼ìš°íŒ…ì´ ëœë‹¤.

![](/assets/images/2024/2024-03-11-16-32-58.png)

<br>

## 1.2 app routerì™€ pages routerì˜ ì‚¬ìš©

> app routerì™€ pages router ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

- ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œëŠ” `app router`ë¥¼ ì‚¬ìš©í•˜ë¼ê³  ì œì‹œí•˜ê³  ìˆë‹¤.
- `Pages Router`ì—ì„œëŠ” ì§ì ‘ ìºì‹±ì„ êµ¬í˜„í•´ì•¼ í–ˆì§€ë§Œ, `App Router`ë¥¼ ì‚¬ìš©ì‹œ ìºì‹±ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.

<br><br>

# 2. ë¼ìš°íŒ… ì£¼ìš” ìš©ì–´

![](/assets/images/2024/2024-03-11-19-08-43.png)

- Tree
  - ê³„ì¸µ êµ¬ì¡°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ì˜ ë³´ê¸° ìœ„í•œ ê·œì¹™
- Subtree
  - treeì˜ í•œ ë¶€ë¶„
  - rootë¶€í„° ì‹œì‘í•´ì„œ leafë“¤ì— ì´ë¥´ê¸°ê¹Œì§€ì˜ ë²”ìœ„
- Root
  - Tree ë˜ëŠ” Subtreeì˜ ì²« ë²ˆì§¸ ë…¸ë“œ
  - root layout ê°™ì€ ê²ƒì´ ëœë‹¤.<br><br>
    ![](/assets/images/2024/2024-03-11-19-09-33.png)
- Leaf
  - childrenì´ ë”ì´ìƒ ì—†ëŠ” nodeë¥¼ ë§í•œë‹¤.
- URL Segment
  - ìŠ¬ë˜ì‹œ(/)ë¡œ ë¶„ë¥˜ëœ URL pathì˜ í•œ ë¶€ë¶„ì„ ë§í•œë‹¤.<br><br>
    ![](/assets/images/2024/2024-03-11-19-14-59.png)
- URL Path
  - ë„ë©”ì¸(www.sample-web.com) ì´í›„ ë”°ë¼ì˜¤ëŠ” ì „ì²´ URL ë¶€ë¶„ì„ ë§í•œë‹¤.

<br><br>

# 3. íŒŒì¼(í´ë”) ê¸°ë°˜ ë¼ìš°íŒ…

## 3.1 page.tsx

- page.tsxëŠ” main uiê°€ í‘œì‹œë  ê³³ì´ë‹¤.
- ë”°ë¼ì„œ ì•ìœ¼ë¡œ page.tsx íŒŒì¼ì„ ìƒì„±í•˜ë©´ì„œ ì½”ë”©ì„ í•˜ë©´ ëœë‹¤.

<br>

## 3.2 static routing

> Reactì—ì„œ Routingì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ìš°ë¦¬ëŠ” react-router-dom íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  ì„¸íŒ…ì„ í–ˆì§€ë§Œ, next.jsì—ì„œëŠ” static routingì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì—, ì„¸íŒ…ì„ í•  í•„ìš” ì—†ì´ í´ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.

src > app í´ë” ë°‘ì— test í´ë”ë¥¼ ìƒˆë¡œ ë§Œë“¤ê³  ê·¸ ì•ˆì— page.tsx íŒŒì¼ì„ ë§Œë“¤ì–´ë³´ì

```tsx
// src > app > test > page.tsx
import React from "react";

// í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìƒì„±ì‹œ ì»¨ë²¤ì…˜ : ê²½ë¡œì— ë”°ë¥¸ ì´ë¦„ + í˜ì´ì§€
const TestPage = () => {
  return <div>í•˜ì´í•˜ì´ í…ŒìŠ¤íŠ¸í˜ì´ì§€!</div>;
};

export default TestPage;
```

ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ê·¼í•˜ë©´ í´ë” ê¸°ë°˜ì˜ ë¼ìš°íŒ…ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤!

![](/assets/images/2024/2024-03-11-19-33-13.png)

<br>

> http://localhost:3000/a/b/c ê²½ë¡œë¡œ ì ‘ê·¼í–ˆì„ ë•Œ pageê°€ ë‚˜ì˜¤ê²Œ í•˜ë ¤ë©´ ì–´ë–»ê²Œí•´ì•¼í• ê¹Œ?

aí´ë” ì•„ë˜ bí´ë” ì•„ë˜ cí´ë” ì•„ë˜ page.tsxê°€ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì ‘ê·¼í•˜ë©´ ëœë‹¤.

![](/assets/images/2024/2024-03-11-19-39-23.png)

<br>

## 3.3 dynamic routing

react-router-domì—ì„œ íŠ¹ì • ê²½ë¡œê°€ dynamicí•œ parameterì— ì˜í•´ ê³„ì† ë³€í•  ë•Œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì£¼ì—ˆë‹¤.

```js
const Router = () => {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
        <Route path="/contact" element={<Contact />} />
        <Route path="/works" element={<Works />} />
        <Route path="/products/:id" element={<Product />} />
      </Routes>
    </BrowserRouter>
  );
};
```

<br>

> í•˜ì§€ë§Œ, Nextì—ì„œëŠ” í´ë” ì´ë¦„ì„ ëŒ€ê´„í˜¸ë¡œ ê°ì‹¸ëŠ” ë°©ì‹ìœ¼ë¡œ ë¼ìš°íŒ… ì²˜ë¦¬ë¥¼ í•œë‹¤.

ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, íŒ¨í„´ì— ì¼ì¹˜í•˜ëŠ” ëª¨ë“  ê²½ë¡œë¥¼ í˜ì´ì§€ë¡œ ì—°ê²°í•˜ê²Œ ëœë‹¤.

app/posts/[id]/page.tsx íŒŒì¼ì˜ ê²½ìš° **`/posts/1`** **`/posts/2`** ë“± ê²½ë¡œì— ëŒ€í•´ ë™ì ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

![](/assets/images/2024/2024-03-11-19-42-35.png)

<br>

ì§ì ‘ ì‚¬ìš©í•´ë³´ì

```tsx
// app>test>[id]>page.tsx
import React from "react";

const TestDetailPage = ({
  params,
}: {
  params: {
    id: string;
  };
}) => {
  return <div>Detail page:{params.id}</div>;
};

export default TestDetailPage;
```

![](/assets/images/2024/2024-03-11-19-50-19.png)

![](/assets/images/2024/2024-03-11-19-51-44.png)

<br>

## 3.4 route groups

> í´ë” ìƒì„±ì‹œ routingì— í¬í•¨ì´ ë˜ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•´ì„œ ëŒ€ê´„í˜¸ ()ë¡œ ê°ì‹¸ì£¼ë©´ ëœë‹¤. (ë¼ìš°íŒ…ì´ ì•„ë‹Œ ë‹¨ìˆœí•œ ë¶„ë¥˜ë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤!)

![](/assets/images/2024/2024-03-11-19-53-34.png)

![](/assets/images/2024/2024-03-11-19-55-53.png)

```tsx
import React from "react";

const AdminAboutPage = () => {
  return <div>AdminAboutPage</div>;
};

export default AdminAboutPage;
```

- http://localhost:3000/admin/about -> 404 error
- http://localhost:3000/about -> ì ‘ê·¼ ê°€ëŠ¥

âš ï¸ ëŒ€ê´„í˜¸ ()ë¡œ ê°ì‹¼ í´ë”ëŠ” route groupsì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ê²½ë¡œì— about pageê°€ ì¡´ì¬í•´ì„œëŠ” ì•ˆëœë‹¤.

<br><br>

## 3.5 speciall files

> Next.jsì—ì„œëŠ” Routingì„ í´ë” ê¸°ë°˜, ì¦‰ Nested Folders(ì¤‘ì²©ëœ í´ë”)ë¡œ êµ¬í˜„ì„ í•˜ê³  ìˆë‹¤. ì´ ê³¼ì •ì—ì„œ ì–´ë–¤ ë¼ìš°íŠ¸ì— ëŒ€í•œ íŠ¹ì • ì²˜ë¦¬ë¥¼ ìœ„í•´ ìƒì„±ë˜ëŠ” ì—¬ëŸ¬ speciall filesì´ ì¡´ì¬í•œë‹¤.

- íŠ¹ì • ì²˜ë¦¬ì˜ ì¢…ë¥˜
  - íŠ¹ì • ê²½ë¡œ í•˜ìœ„ì— ìˆëŠ” routingì€ ëª¨ë‘ ê³µí†µ layoutì„ ì ìš©í•˜ê³  ì‹¶ì„ ë•Œ
  - íŠ¹ì • ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë”©ì¤‘ì¼ ë•Œ, ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ë³´ì—¬ì£¼ê³  ì‹¶ì€ UIê°€ ìˆì„ ë•Œ ë“±

<br>

### 3.5.1 layout

> layoutíŒŒì¼ì€ ì–´ë–¤ segmentì™€ ê·¸ì˜ ìì‹ nodeì— ìˆëŠ” ìš”ì†Œë“¤ì´ ê³µí†µì ìœ¼ë¡œ ì ìš©ë°›ê²Œ í•  UIë¥¼ ì •ì˜í•œë‹¤.

ìì‹ nodeì— ìˆëŠ” ìš”ì†Œë“¤ì´ ê³µí†µ ì ìš©ì„ ë°›ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ children propì´ ì¡´ì¬í•´ì•¼ í•œë‹¤. -ë™ì¼ layout ì•ˆì—ì„œ ë‹¤ë¥¸ ê²½ë¡œë¥¼ ê³„ì†í•´ì„œ ì™”ë‹¤ê°”ë‹¤ í•  ë•Œ re-renderingì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

<br>

React.jsë¥¼ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” react-router-domìœ¼ë¡œ ì´ë ‡ê²Œ êµ¬í˜„í•˜ì˜€ë‹¤.

```js
createBrowserRouter(
  createRoutesFromElements(
    <Route path="/" element={<Root />}>
      <Route path="contact" element={<Contact />} />
      <Route
        path="dashboard"
        element={<Dashboard />}
        loader={({ request }) =>
          fetch("/api/dashboard.json", {
            signal: request.signal,
          })
        }
      />
      <Route element={<AuthLayout />}>
        <Route path="login" element={<Login />} loader={redirectIfUser} />
        <Route path="logout" action={logoutUser} />
      </Route>
    </Route>
  )
);
```

<br>

> Next.jsë¥¼ ì‚¬ìš©í•˜ì—¬ layoutì„ êµ¬í˜„í•´ë³´ì<br>
> ëª©í‘œ : (admin) í•˜ìœ„ ê²½ë¡œì˜ ëª¨ë“  í˜ì´ì§€ë“¤ì€ adminì˜ style ì˜í–¥ì„ ë°›ê²Œ í•˜ê¸°

ë¨¼ì € (admin) í•˜ìœ„ ê²½ë¡œì— ìƒˆë¡­ê²Œ sample í´ë”ë¥¼ ë§Œë“¤ì.

```tsx
// src > app > (admin) > sample > page.tsx
import React from "react";

const SamplePage = () => {
  return <div>ì½”ë¦¬ğŸ¶</div>;
};

export default SamplePage;
```

<br>

ê·¸ í›„, í•´ë‹¹ í´ë”ì— layout.tsx íŒŒì¼ì„ ë§Œë“¤ì

![](/assets/images/2024/2024-03-11-20-46-15.png)

<br>

Layoutì´ childrenì„ í¬í•¨í•˜ê³  ìˆì–´ì•¼ë§Œ í•˜ìœ„ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë Œë”ë§ í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´ childrenì„ í¬í•¨ì‹œì¼œì„œ ê³µí†µ UIë¥¼ ë§Œë“¤ì.

```tsx
// src > app > (admin) > layout.tsx
import React from "react";

const AdminLayout = ({ children }: { children: React.ReactNode }) => {
  return (
    <div>
      <p>ğŸ©·</p>
      {children}
    </div>
  );
};

export default AdminLayout;
```

![](/assets/images/2024/2024-03-11-20-47-17.png)

<br>

> Next.js í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  ë‚˜ë©´ ì´ë¯¸ root ê²½ë¡œì— layout.tsx íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ë°, ì•„ë˜ ì½”ë“œë¥¼ ì…ë ¥í•´ì„œ ê³µí†µ ë ˆì´ì•„ì›ƒì´ ë³€ê²½ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

```tsx
// src > app > layout.tsx
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body className={inter.className}>
        <nav>
          <a href="/">Home</a>
          <a href="/about">About</a>
          <a href="/contact">Contact</a>
          <a href="/blog">Blog</a>
        </nav>
        {children}
      </body>
    </html>
  );
}
```

![](/assets/images/2024/2024-03-11-20-51-18.png)

<br>

### 3.5.2 template

> template íŒŒì¼ì€ layoutê³¼ ìƒë‹¹íˆ ìœ ì‚¬í•œ ì»´í¬ë„ŒíŠ¸ì´ë‹¤.

- í•˜ì§€ë§Œ, "ìƒíƒœë¥¼ ìœ ì§€"ì™€ "ë¦¬-ë Œë”ë§" ì— ìˆì–´ì„œ ì°¨ì´ì ì´ ì¡´ì¬í•œë‹¤.
- ê²½ë¡œ ì „ë°˜ì— ê±¸ì³ì„œ ìƒíƒœê°€ ìœ ì§€ë˜ëŠ” ë ˆì´ì•„ì›ƒê³¼ ë‹¬ë¦¬, í…œí”Œë¦¿ì€ ë¼ìš°íŒ…ì„ íƒìƒ‰í•  ë•Œ ê° í•˜ìœ„ í•­ëª©ì— ëŒ€í•´ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
- ì¦‰, User ì…ì¥ì—ì„œ ë™ì¼í•œ Templateì„ ê³µìœ í•˜ëŠ” ê²½ë¡œ ì‚¬ì´ë¥¼ ì™”ë‹¤ê°”ë‹¤ í•  ë•Œ DOM ìš”ì†Œê°€ ë‹¤ì‹œ ìƒì„±ëœë‹¤ëŠ” ê²ƒì´ë‹¤.

<br>

> ê·¸ë˜ì„œ ì´ëŸ° use-caseê°€ ì¡´ì¬í•œë‹¤.

1. í…œí”Œë¦¿ì„ í†µí•œ í˜ì´ì§€ open animation
   - í˜ì´ì§€ ê°„ ì „í™˜ ì‹œ ì• ë‹ˆë©”ì´ì…˜ì„ ê³„ì†í•´ì„œ ì£¼ê³  ì‹¶ì„ ë•Œ layoutìœ¼ë¡œ ë§Œë“¤ì–´ë†“ìœ¼ë©´, ìµœì´ˆ ë Œë”ë§ì‹œì—ë§Œ animationì´ ì ìš©ë˜ê³  ëë‚˜ë²„ë¦°ë‹¤. ì´ ë•Œ, templateì„ ì‚¬ìš©í•œë‹¤.
2. useEffect, useStateì— ì˜ì¡´í•˜ëŠ” ê¸°ëŠ¥

<br>

> layout vs template

í…ŒìŠ¤íŠ¸í˜ì´ì§€ â†’ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ 1 â†’ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ 2 ë¥¼ ê³„ì† ì™”ë‹¤ê°”ë‹¤ í•´ë³´ì

```tsx
// src > app > test > layout.tsx
// src > app > test > template.tsx
"use client";

import Link from "next/link";
import React from "react";

const TestTemplate = ({ children }: { children: React.ReactNode }) => {
  useEffect(() => {
    console.log("ìµœì´ˆ ë Œë”ë§ í•œ ë²ˆë§Œ í˜¸ì¶œí•©ë‹ˆë‹¤.");
  }, []);

  return (
    <div className="m-8 p-8 bg-white">
      <h1>í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>
      <p>í…ŒìŠ¤íŠ¸ ê²½ë¡œ í•˜ìœ„ì—ì„œì˜ ì´ë™ì„ í™•ì¸í•´ë´…ë‹ˆë‹¤.</p>
      <nav>
        <ul>
          <li>
            <Link href="/test">í…ŒìŠ¤íŠ¸ í˜ì´ì§€</Link>
          </li>
          <li>
            <Link href="/test/1">í…ŒìŠ¤íŠ¸ í˜ì´ì§€ 1</Link>
          </li>
          <li>
            <Link href="/test/2">í…ŒìŠ¤íŠ¸ í˜ì´ì§€ 2</Link>
          </li>
        </ul>
      </nav>
      {children}
    </div>
  );
};

export default TestTemplate;
```

- layoutì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° : console.logê°€ ìµœì´ˆ í•œ ë²ˆë§Œ í˜¸ì¶œëœë‹¤.<br><br>
  ![](/assets/images/2024/2024-03-11-21-38-57.png)
  <br><br>
- templateì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° : í˜ì´ì§€ë¥¼ ì´ë™í•  ë•Œë§ˆë‹¤ í˜¸ì¶œëœë‹¤.<br><br>
  ![](/assets/images/2024/2024-03-11-21-39-32.png)

â¡ï¸ ê²°ë¡ : íŠ¹ì •í•œ ì´ìœ ê°€ ìˆì§€ ì•ŠëŠ” í•œ, layout.tsxë¥¼ ì‚¬ìš©í•˜ê¸°!

<br>

### 3.5.3 not-found

404 not found í˜ì´ì§€ë¥¼ react-router-domì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¸íŒ…í–ˆì—ˆë‹¤.

```js
<Router>
  <Routes>
    <Route path={"/home"} element={<Home />} />
    <Route path={"/*"} element={<h1>404: Not Found</h1>} />
  </Routes>
</Router>
```

<br>

> next.jsì—ì„œëŠ” ìš°ë¦¬ê°€ ë³„ë„ ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ ìŠ¤íƒ€ì¼ì´ ëœ not found í˜ì´ì§€ë¥¼ ì œê³µí•œë‹¤.

![](/assets/images/2024/2024-03-11-20-55-32.png)

<br>

ì•„ë˜ì™€ ê°™ì´ ì§ì ‘ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```tsx
// src > app > not-found.tsx
import React from "react";

const NotFound = () => {
  return <div>ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.</div>;
};

export default NotFound;
```

![](/assets/images/2024/2024-03-11-21-58-29.png)

<br><br>

# 4. metadataì™€ SEO

> Next.jsëŠ” í–¥ìƒëœ SEOë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œ html headì— ì‚½ì…í–ˆì—ˆë˜ ë§ì€ ì •ë³´ë¥¼ metadataëŠ” ê°ì²´ í˜•íƒœë¡œ ì§€ì›í•˜ê³  ìˆë‹¤.

![](/assets/images/2024/2024-03-11-22-00-03.png)

<br>

> ë¦¬ì•¡íŠ¸ì—ì„œëŠ” viteë¥¼ ì“°ë˜ ì¼ë°˜ CRAë¥¼ ì“°ë˜ index.html íŒŒì¼ì´ ì¡´ì¬í–ˆê³ , ì´ íŒŒì¼ì˜ head íƒœê·¸ì— SEO(Search Engine Optimization, ê²€ìƒ‰ ì—”ì§„ ìµœì í™”) í–¥ìƒì„ ìœ„í•´ ì—¬ëŸ¬ meta, link íƒœê·¸ ë“± ë©”íƒ€ë°ì´í„°ë¥¼ ì‘ì„±í–ˆë‹¤.

![](/assets/images/2024/2024-03-11-22-00-49.png)

<br>

> í•˜ì§€ë§Œ Next.jsì—ì„œëŠ” Config-based Metadataë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. ë‘ ê°€ì§€ ë°©ë²•ì´ ì¡´ì¬í•œë‹¤.

â‘  page.tsx ë˜ëŠ” layout.tsx ì–´ë””ë“ ì§€ ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚½ì…í•˜ë©´ ì ìš©ì´ ëœë‹¤.

```tsx
export const metadata: Metadata = {
  title: "íƒ€ì´í‹€ ì§€ì •!!",
  description: "This is awesome Website",
};
```

- metadata in page.tsx : í•´ë‹¹ page.tsx ì»´í¬ë„ŒíŠ¸ì—ë§Œ ì ìš©
- metadata in layout.tsx : í•´ë‹¹ layoutì˜ í•˜ìœ„ ìš”ì†Œì— ëª¨ë‘ ì ìš©

<br>

page.tsx ì¼€ì´ìŠ¤ëŠ” í•´ë‹¹ í˜ì´ì§€ë§Œ metadataì˜ ì ìš©ì„ ë°›ëŠ”ë‹¤.

```tsx
// src > app > page.tsx
import { Metadata } from "next";

export const metadata: Metadata = {
  title: "íƒ€ì´í‹€ ì§€ì •!!",
  description: "This is awesome Website",
};

export default function Home() {
  return <div>ì•ˆë…• Next.js! ë°˜ê°€ì›Œ!</div>;
}
```

![](/assets/images/2024/2024-03-11-22-48-52.png)

<br>

layout.tsx ì¼€ì´ìŠ¤ëŠ” í•´ë‹¹ layoutì˜ í•˜ìœ„ ìš”ì†Œì— metadataë¥¼ ê³µí†µìœ¼ë¡œ ì ìš©í•œë‹¤.

```tsx
// src > app > layout.tsx
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "íƒ€ì´í‹€!",
  description: "Generated by create next app",
};

export default function RootLayout({

...ê¸°ì¡´ì½”ë“œ
```

![](/assets/images/2024/2024-03-11-22-51-41.png)

<br>

â‘¡ dynamic

dynamic routeë¥¼ ê°–ê³ ìˆëŠ” routeì—ì„œ ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ëŠ” paramsë¥¼ ê¸°ë°˜ìœ¼ë¡œ metadataë¥¼ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•Œ generateMetadata functionì„ ì‚¬ìš©í•œë‹¤.

```tsx
import React from "react";

type Props = {
  params: {
    id: string;
  };
};

export function generateMetadata({ params }: Props) {
  return {
    title: `Detail í˜ì´ì§€ : ${params.id}`,
    description: `Detail í˜ì´ì§€ : ${params.id}`,
  };
}

const TestDetailPage = ({ params }: Props) => {
  return <div>Detail í˜ì´ì§€ : {params.id}</div>;
};

export default TestDetailPage;
```

ì¦‰, ë™ì ìœ¼ë¡œ(dynamic) ë“¤ì–´ì˜¨ paramsì— ëŒ€í•´ì„œë„ metadataë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://nextjs.org/docs/app/building-your-application/optimizing/metadata)ë¥¼ í™•ì¸í•˜ì

<br><br>

# 5. í˜ì´ì§€ ì´ë™ê³¼ ê´€ë ¨ëœ ê¸°ëŠ¥ ëª©ë¡

## 5.1 Link

> Next.jsëŠ” `<Link>`ë¼ëŠ” ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê³µí•œë‹¤. í¬ê²Œ ë‘ ê°€ì§€ ì£¼ìš” ì—­í• ì„ í•œë‹¤.

â‘  Link íƒœê·¸ëŠ” prefetching ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.

- Next.jsì˜ `<Link>` ì»´í¬ë„ŒíŠ¸ëŠ” ë·°í¬íŠ¸ì— ë§í¬ê°€ ë‚˜íƒ€ë‚˜ëŠ” ìˆœê°„ í•´ë‹¹ í˜ì´ì§€ì˜ ì½”ë“œì™€ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ê°€ì ¸ì˜¤ëŠ” <span style="color:indianred">í”„ë¦¬í˜ì¹­</span>â­ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.
  - ë·°í¬íŠ¸ê°€ ë§í¬ì— ë‚˜íƒ€ë‚˜ëŠ” ìˆœê°„ì´ë€ ì‚¬ìš©ìê°€ ì›¹ í˜ì´ì§€ë¥¼ ìŠ¤í¬ë¡¤í•˜ê±°ë‚˜ í˜ì´ì§€ë¥¼ ì´ë™í•˜ë©´ì„œ í•´ë‹¹ ë§í¬ê°€ ì‹¤ì œë¡œ ì‚¬ìš©ìì˜ í™”ë©´(ì¦‰, ë·°í¬íŠ¸ ë‚´)ì— ë³´ì´ê¸° ì‹œì‘í•˜ëŠ” ìˆœê°„ì„ ë§í•œë‹¤.
- ì‚¬ìš©ìê°€ ë§í¬ë¥¼ í´ë¦­í•˜ê¸° ì „ì— ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•¨ìœ¼ë¡œì¨ ì‚¬ìš©ìê°€ ë§í¬ë¥¼ í´ë¦­í–ˆì„ ë•Œ ê±°ì˜ ì¦‰ì‹œ í˜ì´ì§€ë¥¼ ë³¼ ìˆ˜ ìˆê²Œ í•œë‹¤.

<br>

â‘¡ Link íƒœê·¸ëŠ” route ì‚¬ì´ì— client-side navigationì„ ì§€ì›í•œë‹¤.

- `<Link>` ì»´í¬ë„ŒíŠ¸ëŠ” ë¸Œë¼ìš°ì €ê°€ ìƒˆ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ê¸° ìœ„í•´ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ëŒ€ì‹ , í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ í˜ì´ì§€ë¥¼ ë°”ê¾¸ì–´ ì£¼ê¸° ë•Œë¬¸ì— í˜ì´ì§€ ì „í™˜ ì‹œ ë§¤ìš° ë¹ ë¥¸ ì‚¬ìš©ì ê²½í—˜(UX)ì„ ì œê³µí•œë‹¤.
- í˜ì´ì§€ì˜ HTMLì„ ì„œë²„ì—ì„œ ë‹¤ì‹œ ê°€ì ¸ì˜¬ í•„ìš” ì—†ì´, í•„ìš”í•œ JSON ë°ì´í„°ë§Œ ì„œë²„ë¡œë¶€í„° ê°€ì ¸ì™€ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ í˜ì´ì§€ë¥¼ ì¬êµ¬ì„±í•˜ì—¬ ë Œë”ë§í•œë‹¤.
- ê²°êµ­ Link íƒœê·¸ëŠ” a íƒœê·¸ë¥¼ ë§Œë“¤ì–´ë‚´ê¸° ë•Œë¬¸ì— SEOê°€ ìœ ë¦¬í•˜ë‹¤.

- ë³€ê²½ ì „ (aíƒœê·¸ ì“°ì§€ ë§ê²ƒ!!)

```tsx
// src > app > layout.tsx
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Sparta Next App",
  description: "This is awesome Website",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body className={inter.className}>
        <nav>
          <a href="/">Home</a>
          <a href="/about">About</a>
          <a href="/contact">Contact</a>
          <a href="/blog">Blog</a>
        </nav>
        {children}
      </body>
    </html>
  );
}
```

<br>

- ë³€ê²½ í›„

```tsx
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";
import Link from "next/link";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Sparta Next App",
  description: "This is awesome Website",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body className={inter.className}>
        <nav>
          <Link href="/">Home</Link>
          <Link href="/about">About</Link>
          <Link href="/contact">Contact</Link>
          <Link href="/blog">Blog</Link>
        </nav>
        {children}
      </body>
    </html>
  );
}
```

<br>

## 5.2 useRouter

> useRouterë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” í•­ìƒ ì½”ë“œ ìµœìƒë‹¨ì— â€œuse clientâ€ë¥¼ ì‚½ì…í•´ì•¼ í•œë‹¤!â­

- a íƒœê·¸ë¥¼ ì•Œì•„ì°¨ë¦´ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— í¬ë¡¤ëŸ¬ ì…ì¥ì—ì„œëŠ” í•´ë‹¹ ìš”ì†Œê°€ "ì´ë™ì„ ì›í•œë‹¤"ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ì—†ë‹¤. â‡’ SEO ë¶ˆë¦¬
- ëŒ€ë¶€ë¶„ onClick ê°™ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì‚¬ìš©í•œë‹¤.
- í´ë¦­ í›„ ë¡œì§ì˜ ìˆœì„œì— ë”°ë¼ ì‹¤í–‰í•˜ë¯€ë¡œ, ì¦‰ì‹œ ì´ë™ì´ ì•„ë‹ˆë‹¤.

```tsx
"use client";

import { useRouter } from "next/navigation";

export default function Test () {
	const router = useRouter();

	const handleButtonClick = () => {
		ë¡œì§1();
		ë¡œì§2();

		...

		router.push("/new_location");
	}

	return <button onClick={handleButtonClick}>í´ë¦­!</button>
}
```

<br>

```tsx
"use client";

import { useRouter } from "next/navigation";
import React, { useEffect } from "react";

const TestTemplate = ({ children }: { children: React.ReactNode }) => {
  const router = useRouter();

  useEffect(() => {
    console.log("ìµœì´ˆ ë Œë”ë§ í•œ ë²ˆë§Œ í˜¸ì¶œí•©ë‹ˆë‹¤.");
  }, []);

  return (
    <div className="m-8 p-8 bg-black">
      <nav>
        <ul>
          <li
            onClick={() => {
              router.push("/test");
            }}
          >
            í…ŒìŠ¤íŠ¸ í˜ì´ì§€
          </li>
          <li
            onClick={() => {
              router.push("/test/1");
            }}
          >
            í…ŒìŠ¤íŠ¸ í˜ì´ì§€ 1
          </li>
          <li
            onClick={() => {
              router.push("/test/2");
            }}
          >
            í…ŒìŠ¤íŠ¸ í˜ì´ì§€ 2
          </li>
        </ul>
      </nav>
      {children}
    </div>
  );
};

export default TestTemplate;
```

![](/assets/images/2024/2024-03-11-23-12-50.png)

<br>

## 5.3 history stack

![](/assets/images/2024/2024-03-11-23-18-29.png)

- router.push
  - ìƒˆë¡œìš´ URLì„ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì— ì¶”ê°€í•œë‹¤.
  - ì‚¬ìš©ìê°€ router.pushë¡œ í˜ì´ì§€ë¥¼ ì´ë™í•˜ë©´, ì´ë™í•œ í˜ì´ì§€ì˜ URLì´ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì˜ ë§¨ ìœ„ì— ìŒ“ì¸ë‹¤.
  - ì´í›„ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì˜ 'ë’¤ë¡œ ê°€ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ìŠ¤íƒì—ì„œ ê°€ì¥ ìµœê·¼ì— ì¶”ê°€ëœ URLë¡œë¶€í„° ì´ì „ í˜ì´ì§€(URL)ë¡œ ëŒì•„ê°„ë‹¤.
- router.replace
  - í˜„ì¬ URLì„ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì—ì„œ ìƒˆë¡œìš´ URLë¡œ ëŒ€ì²´í•œë‹¤.
  - í˜„ì¬ í˜ì´ì§€ì˜ URLì´ ìƒˆë¡œìš´ URLë¡œ êµì²´ë˜ë©°, 'ë’¤ë¡œ ê°€ê¸°'ë¥¼ í´ë¦­í–ˆì„ ë•Œ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™í•˜ì§€ë§Œ, êµì²´ëœ í˜ì´ì§€ë¡œëŠ” ëŒì•„ê°ˆ ìˆ˜ ì—†ë‹¤.
  - í˜„ì¬ í˜ì´ì§€ë¥¼ íˆìŠ¤í† ë¦¬ì—ì„œ ì™„ì „íˆ ëŒ€ì²´í•œë‹¤.
- router.back
  - ì‚¬ìš©ìë¥¼ íˆìŠ¤í† ë¦¬ ìŠ¤íƒì—ì„œ í•œ ë‹¨ê³„ ë’¤ë¡œ ì´ë™ì‹œí‚¨ë‹¤.
  - ë§ˆì¹˜ ë¸Œë¼ìš°ì €ì˜ 'ë’¤ë¡œ ê°€ê¸°' ë²„íŠ¼ì„ í´ë¦­í•œ ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë‚´ë©°, ì‚¬ìš©ìë¥¼ ì´ì „ì— ë°©ë¬¸í–ˆë˜ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê²Œ í•œë‹¤.
- router.reload
  - í˜„ì¬ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•œë‹¤.
  - íˆìŠ¤í† ë¦¬ ìŠ¤íƒì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤.
  - í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

â­ ë¡œê·¸ì•„ì›ƒì‹œ ì´ì „ í˜ì´ì§€ë¡œ ì´ë™í•  í•„ìš”ê°€ ì—†ìœ¼ë‹ˆ replaceê°€ íš¨ìœ¨ì ì´ë‹¤!

<br>
