---
title: "[React] ì‚¬ìš©ì ê¶Œí•œì— ë”°ë¥¸ ë Œë”ë§ (ì‘ì„±ì¤‘)"
categories: [React]
tag: [React]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

# 1. ë¡œì§ ì„¤ëª…

## 1.1 Router ì‘ì„±

> login, logout ì—¬ë¶€ì— ë”°ë¥¸ ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸ì˜ ìœ ì € ê¶Œí•œë³„ ì²˜ë¦¬ë¥¼ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í• ê¹Œ?

ì¸ì¦ ìƒíƒœ(ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ)ì— ë”°ë¼ì„œ Layoutì„ ë‹¤ë¥´ê²Œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ Routerë¥¼ ë‘ ì¢…ë¥˜ë¡œ ë‚˜ëˆ„ë©´ ëœë‹¤. (ì¤‘ì²© ë¼ìš°íŒ… ì‚¬ìš©)

```js
// shared/Router.jsx
const Router = () => {
  return (
    <BrowserRouter>
      <Routes>
        {/* (1) ë¡œê·¸ì¸ í•˜ì§€ ì•Šì•„ë„ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ : ë¡œê·¸ì¸ í˜ì´ì§€, íšŒì›ê°€ì… í˜ì´ì§€, ìƒí’ˆ í˜ì´ì§€ ë“± */}
        <Route element={<NonAuthLayout />}>
          <Route path="/login" element={<Login />} />
          <Route path="/join" element={<Join />} />
        </Route>

        {/* (2) ë¡œê·¸ì¸ í•´ì•¼ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ : ë§ˆì´í˜ì´ì§€, ì¦ê²¨ì°¾ê¸° í˜ì´ì§€ ë“± */}
        <Route element={<AuthLayout />}>
          <Route path="/mypage" element={<MyPage />} />
          <Route path="/mysth" element={<MySth />} />
        </Route>
      </Routes>
    </BrowserRouter>
  );
};
```

<br>

## 1.2 element ì‘ì„±

> ê° ê³µí†µ element(AuthLayout, NonAuthLayout)ëŠ” Outletì„ ê°€ì§€ê³  ìˆì–´ì„œ ì¤‘ì²© ë¼ìš°íŒ…ì˜ ë‚´ë¶€ì— ë“¤ì–´ê°€ëŠ” ë¼ìš°íŒ… ì»´í¬ë„ŒíŠ¸ê°€ í¬í•¨ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

í† í° ê²€ì¦ì„ ì„±ê³µí–ˆìœ¼ë©´(ë¡œê·¸ì¸ì´ ë˜ì–´ìˆëŠ” ê²½ìš°) ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ ëœë‹¤.

```js
// shared/NonAuthLayout
import React, { useEffect } from "react";
import { Outlet, useNavigate } from "react-router-dom";

const NonAuthLayout = () => {
  useEffect(() => {
    const navigate = useNavigate();
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ í† í° ê²€ì¦
    const token = localStorage.getItem("accessToken");
    if (token) {
      navigate.push("/");
    }
  }, []);

  // ë¡œê·¸ì¸ì´ ì•ˆë˜ì–´ìˆëŠ” ê²½ìš° (í† í°ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°) => ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
  return (
    <div>
      {/* Outlet : React Router Domì—ì„œ ì œì‹œí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ */}
      <Outlet />
    </div>
  );
};

export default NonAuthLayout;
```

<br>

í† í° ê²€ì¦ì´ ì‹¤íŒ¨í–ˆìœ¼ë©´ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ (ë˜ëŠ” ë¦¬ë•ìŠ¤) ì— ìˆëŠ” í† í°ì„ ì‚­ì œí•˜ê³  ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ ëœë‹¤.

```js
// shared/AuthLayout
import { useEffect } from "react";
import { Outlet, useNavigate } from "react-router-dom";

const AuthLayout = () => {
  useEffect(() => {
    const navigate = useNavigate();
    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ í† í° ê²€ì¦
    const token = localStorage.getItem("accessToken");
    if (!token) {
      navigate.push("/login");
    }
  }, []);
  return (
    <div>
      <Outlet />
    </div>
  );
};

export default AuthLayout;
```

<br>

## 1.3 ë Œë”ë§ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” state ìƒì„±

- ìœ„ì˜ AuthLayout ì½”ë“œì—ì„œ ë Œë”ë§ì´ ë¨¼ì € ì™„ë£Œ ëœ í›„ useEffectê°€ ì‹¤í–‰ëœë‹¤.
- ë”°ë¼ì„œ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê¸° ì „ì— ì‚¬ìš©ìê°€ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ë Œë”ë§ ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” state ìƒì„±í•´ì•¼í•œë‹¤.

```js
// shared/AuthLayout
import { useEffect, useState } from "react";
import { Outlet, useNavigate } from "react-router-dom";

const AuthLayout = () => {
  // state ìƒì„±
  const [isRendered, setIsRendered] = useState(false);

  const navigate = useNavigate();
  useEffect(() => {
    const token = localStorage.getItem("accessToken");

    // í† í°ì´ ì—†ëŠ” ê²½ìš° ê°•ì œ routing
    if (!token) {
      navigate.push("/login");
    }

    // ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
    setIsRendered(true);
  }, []);

  if (!isRendered) {
    return;
  }
  return (
    <div>
      <Outlet />
    </div>
  );
};

export default AuthLayout;
```

ì´ë ‡ê²Œ í•˜ë©´ ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸ í›„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì´ ê°€ëŠ¥í•˜ë‹¤.

<br>

## 1.4 axiosì—ì„œ ì²˜ë¦¬í•´ì•¼í•  ë¡œì§

> axios call í•  ë•Œ request requestí•´ì„œ í† í°ì´ ìœ íš¨ë¼ì§€ ì•Šì„ ê²½ìš° ë°”ë¡œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œí•˜ëŠ” ë¡œì§ì´ í•„ìš”í•˜ë‹¤.

- request : aixos ì¸í„°ì…‰í„°ì—ì„œ í† í°ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° ìš”ì²­ì„ í•˜ì§€ ì•ŠìŒ -> ë°”ë¡œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
- request : ì„œë²„ë¡œë¶€í„° í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šë‹¤ëŠ” ì‘ë‹µì„ ë°›ì•˜ìœ¼ë©´ ë¡œê·¸ì¸ ìƒíƒœì¸ í† í° ê°’ ì‚­ì œí•˜ê¸° -> ì¶”í›„ ë¡œê·¸ì¸ í˜ì´ì§€ ì´ë™

<br>

ğŸ”’ ì¸ì¦/ì¸ê°€ëŠ” axios call í•  ë•Œ, routing ì¡°ê±´ë¶€ ë Œë”ë§ì„ í•´ì•¼ ì™„ì „í•œ ì½”ë“œê°€ ë  ìˆ˜ ìˆë‹¤!

<br><br>

# 2. ì—°ìŠµí•˜ê¸°

ì´ì œ ë¡œì§ì„ íŒŒì•…í–ˆìœ¼ë‹ˆ ì‚¬ìš©ì ê¶Œí•œì— ë”°ë¥¸ ë Œë”ë§ì„ ì—°ìŠµí•´ë³´ì.

ì¸ì¦ API ëª…ì„¸ì„œëŠ” ã€Š[ Thunder Clientë¥¼ ì´ìš©í•œ í†µì‹  ì—°ìŠµ](https://mynamesieun.github.io/react/Thunder-Client%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%86%B5%EC%8B%A0-%EC%97%B0%EC%8A%B5/) ã€‹í¬ìŠ¤íŒ…ì˜ API ëª…ì„¸ì„œë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

<br>

## 2.0 íŒŒì¼ êµ¬ì¡°

## 2.1 Router ì‘ì„±

ë¼ìš°í„°ëŠ” ì¤‘ì²© ë¼ìš°íŒ…ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì—ˆë‹¤.

```js
// src > shared > Router.jsx
import { BrowserRouter as Router, Route, Routes } from "react-router-dom";

import Layout from "../components/layout/Layout";
import NonAuthLayout from "../components/layout/NonAuthLayout";
import AuthLayout from "../components/layout/AuthLayout";
import Home from "../pages/Home";
import SearchPage from "../pages/SearchPage";
import TestPage from "../pages/TestPage";
import LoginPage from "../pages/non-auth/LoginPage";
import SignupPage from "../pages/non-auth/SignupPage";
import UserProfilePage from "../pages/auth/UserProfilePage";
import NotFound from "../pages/default-set/NotFound";

export default function RouterPage() {
  return (
    <Router>
      <Routes>
        {/* ë¡œê·¸ì¸ ì—¬ë¶€ ìƒê´€ì—†ëŠ” ë¼ìš°í„° */}
        <Route element={<Layout />}>
          <Route path="/" element={<Home />} />
          <Route path="/search" element={<SearchPage />} />
          <Route path="/testPage" element={<TestPage />} />
        </Route>

        {/* ë¡œê·¸ì¸ ìƒíƒœê°€ ë°˜ë“œì‹œ ì•„ë‹ˆì–´ì•¼ í•˜ëŠ”(ë¡œê·¸ì¸ í•œ ìƒíƒœë©´ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ”) ë¼ìš°í„° */}
        <Route element={<NonAuthLayout />}>
          <Route path="/login" element={<LoginPage />} />
          <Route path="/signup" element={<SignupPage />} />
        </Route>

        {/* ë¡œê·¸ì¸ì´ í•„ìš”í•œ ë¼ìš°í„° */}
        <Route element={<AuthLayout />}>
          <Route path="/user/:userId" element={<UserProfilePage />} />
        </Route>

        {/* 404 Not Found */}
        <Route path="*" element={<NotFound />} />
      </Routes>
    </Router>
  );
}
```

![](/assets/images/2024/2024-02-26-16-48-19.png)

<br>

ê·¸ë¦¬ê³  ê° ê³µí†µ element(AuthLayout, NonAuthLayout)ëŠ” Outletì„ ê°€ì§€ê³  ìˆì–´ì„œ ì¤‘ì²© ë¼ìš°íŒ…ì˜ ë‚´ë¶€ì— ë“¤ì–´ê°€ëŠ” ë¼ìš°íŒ… ì»´í¬ë„ŒíŠ¸ê°€ í¬í•¨ë  ìˆ˜ ìˆë„ë¡ í•´ ì£¼ì—ˆë‹¤.

```js
// src > components > layout > Layout.jsx
import React from "react";
import { Outlet } from "react-router-dom";
import Navigation from "../Navigation";

const Layout = () => {
  return (
    <div>
      <h1>Common Layout</h1>
      <p>ë¡œê·¸ì¸ ì—¬ë¶€ì™€ ìƒê´€ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥í•œ í˜ì´ì§€ì…ë‹ˆë‹¤.</p>
      <Navigation />
      <main>
        <Outlet />
      </main>
    </div>
  );
};

export default Layout;
```

```js
// src > components > layout > NonAuthLayout.jsx
import React from "react";
import { Navigate, Outlet } from "react-router-dom";
import Navigation from "../Navigation";

const NonAuthLayout = () => {
  return (
    <div>
      <h1>Non Auth Layout</h1>
      <p>ë¡œê·¸ì¸ì´ ë°˜ë“œì‹œ ì•ˆë˜ì–´ìˆì–´ì•¼ í•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.</p>
      <Navigation />
      <main>
        <Outlet />
      </main>
    </div>
  );
};

export default NonAuthLayout;
```

```js
// src > components > layout > AuthLayout.jsx
import React from "react";
import { Navigate, Outlet } from "react-router-dom";
import Navigation from "../Navigation";

const AuthLayout = () => {
  return (
    <div>
      <h1>Auth Layout</h1>
      <p>ë°˜ë“œì‹œ ë¡œê·¸ì¸ì´ ë˜ì–´ìˆì–´ì•¼ í•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.</p>
      <Navigation />
      <main>
        <Outlet />
      </main>
    </div>
  );
};

export default AuthLayout;
```

![](/assets/images/2024/2024-02-26-16-47-52.png)

<br>

## 2.2 íšŒì›ê°€ì…, ë¡œê·¸ì¸ ê¸°ëŠ¥ ì‘ì„±

> íšŒì›ê°€ì… ê¸°ëŠ¥

- form íƒœê·¸ì˜ onSubmit ì‘ì„±í•˜ê¸°<br><br>
- authApi(src > axios > auth.js)ë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì›ê°€ì…ì„ ì§„í–‰í•˜ê¸°<br><br>
- íšŒì›ê°€ì… ì„±ê³µ ì‹œ
  1. alert "íšŒì›ê°€ì…ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í• ê²Œìš”â€
  2. login í˜ì´ì§€ë¡œ ìë™ ì´ë™<br><br>
- íšŒì›ê°€ì… ì‹¤íŒ¨ ì‹œ
  1. alertë¡œ ë°±ì—”ë“œì—ì„œ ì œê³µë°›ì€ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥
  2. console.logë¡œ ì˜¤ë¥˜ ë‚´ìš© ì „ì²´ ì¶œë ¥

```js
// src > pages > non-auth > SignupPage.jsx
```

<br>

> ë¡œê·¸ì¸ ê¸°ëŠ¥

- form íƒœê·¸ì˜ onSubmit ì‘ì„±í•˜ê¸°<br><br>
- authApi(src > axios > auth.js)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸ì„ ì§„í–‰í•˜ê¸°
  - í•„ìš” ë°ì´í„° : id, password<br><br>
- ë¡œê·¸ì¸ ì„±ê³µ ì‹œ
  1. alert "ë¡œê·¸ì¸ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í• ê²Œìš”"
  2. localStorageì— ì €ì¥
     1. accessToken
     2. userId
     3. nickname
  3. ë©”ì¸ í˜ì´ì§€(Home ì»´í¬ë„ŒíŠ¸, ê²½ë¡œìƒ â€œ/â€)ë¡œ ìë™ ì´ë™<br><br>
- ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ
  1. alertë¡œ ë°±ì—”ë“œì—ì„œ ì œê³µë°›ì€ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥
  2. console.logë¡œ ì˜¤ë¥˜ ë‚´ìš© ì „ì²´ ì¶œë ¥

```js
// src > pages > non-auth > LoginPage.jsx
```

<br>

## 2.3 Layout ì‘ì„±

<br>

## 2.4 AuthLayout ì‘ì„±

<br>

## 2.5 NonAuthLayout ì‘ì„±

<br>

## 2.6 Navigation ì‘ì„±

<br>

## 2.7 custom axios ì‘ì„±

<br>

## 2.8 ìƒì„¸ í˜ì´ì§€ ì‘ì„±

<br>

## 2.9

<br>

<br>
