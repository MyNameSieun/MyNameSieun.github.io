---
title: "[React] React Qurey"
categories: [React]
tag: [React]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

# 1. React Query 개요

## 1.1 React Query 개념

React Query는 데이터 Fetching, Caching, 동기화, 서버 데이터 업데이트 등의 작업을 간단하게 수행할 수 있도록 도와주는 라이브러리이다.

<br>

## 1.2 기존 미들웨어의 한계

다른 서버와의 API 통신과 비동기 데이터 관리를 위해 Redux-thunk, Redux-Saga 등 미들웨어를 채택할 수 있지만 다음과 같은 문제가 있다.

1. 보일러 플레이트 : 코드량이 너무 많다.
2. 규격화 문제 : Redux가 비동기 데이터 관리를 위한 전문 라이브러리가 아님(규격화 문제)

<br>

## 1.3 React Query 장점

1. 데이터 패칭, 캐싱, 동기화를 간단하고 효율적으로 만든다.
2. 자동 캐싱과 백그라운드 동기화를 통해 사용자가 최신 데이터를 볼 수 있도록 자동으로 캐시를 업데이트하는 로직을 구현할 수 있다.
3. 쿼리 상태(로딩, 에러, 데이터)를 쉽게 관리할 수 있게 해주며, 이를 통해 UI를 자동으로 업데이트할 수 있게 한다. 이로인해 서버 상태와 클라이언트 상태의 동기화를 용이하게 해준다.

즉, 사용하기 쉽고 직관적이기 때문에 사용한다.

<br>

# 2. server state vs client state

## 2.1 Server-Side State

> 서버에 저장되고 관리되는 데이터를 말한다. 이는 데이터베이스, 파일 시스템, 또는 서버의 메모리 등에 저장될 수 있다.

- 중앙 집중식 데이터: 사용자 정보, 애플리케이션 설정, 대규모 데이터셋 등 여러 세션 또는 사용자 간에 공유되어야 하는 데이터를 관리한다.
- 지속성: 데이터가 서버에 저장되므로, 클라이언트의 상태가 초기화되거나 변경되어도 영구적으로 유지된다.
- 동기화와 일관성: 클라이언트에서 서버로 데이터를 요청하거나 업데이트하면서 발생하는 네트워크 지연과 <span style="color:indianred">데이터 동기화</span>에 대한 고려가 필요하다.
- 예시: 사용자 계정 정보, 애플리케이션의 공유 설정, 대규모 데이터셋 등.

<br>

## 2.2 Client-Side State

> 사용자의 브라우저 내에서 관리되는 상태이다. 이는 리액트 컴포넌트의 useState 또는 상태 관리 라이브러리(예: Redux, MobX, Recoil)를 통해 관리된다.

- 로컬 데이터: 주로 UI 컴포넌트의 상태, 사용자 입력, 토글 상태와 같이 로컬에서만 필요한 데이터를 관리한다.
- 성능: 네트워크 지연 없이 빠르게 상태를 변경하고 반응할 수 있다.
- 수명 주기: 클라이언트 사이드 상태는 페이지를 새로고침하거나 애플리케이션을 종료할 때 초기화되는 경향이 있다.
- 예시: 사용자가 입력한 폼 데이터, UI 컴포넌트의 보이기/숨기기 상태 등.

<br><br>

# 3. 주요 개념

## 1.4 주요 키워드

| 키워드             | 설명                                                                                                                                                                                                                                                             |
| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Query              | 데이터에 대한 요청을 의미한다. 주로 조회하는 데 사용되며, 데이터를 가져오는 작업과 비슷하다. (예: axios.get)                                                                                                                                                     |
| Mutation           | - 데이터를 변경하는 작업을 의미한다. 데이터의 추가, 수정, 삭제 등이 해당되며, CRUD 중에서 CUD(Create, Update, Delete)에 해당한다.<br>- axios의 경우 post, put, patch, delete 요청과 비슷하다.(예: axios.post, axios.put, axios.patch, axios.delete)              |
| Query Invalidation | Query를 무효화하는 작업을 의미한다. 서버의 데이터는 언제든지 변경될 수 있기 때문에, 가져온 Query가 최신 상태가 아닐 수 있다. 이런 경우, 기존의 Query를 무효화한 후 최신 데이터를 다시 가져오는 작업이 필요하며, 이 과정을 React Query에서는 자동으로 처리해준다. |

<br><br>

# 2. 구현하기

## 2.1 조회기능 구현

```js
yarn add axios
```

```js
yarn add react-query
```

<br>

## 2.2 추가 기능 구현

<br><br>

# 3. useQuery

<br>

# 4. mutations

<br>

# 참조

- https://www.nextree.io/react-query/

```

```
