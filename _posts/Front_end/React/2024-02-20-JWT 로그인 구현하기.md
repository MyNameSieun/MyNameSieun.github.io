---
title: "[React] JWT ë¡œê·¸ì¸ êµ¬í˜„í•˜ê¸°"
categories: [React]
tag: [React]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

<br>

ë¨¼ì € ì•„ë˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì

```
npm i axios react-router-dom styled-components
```

<br>

ê·¸ í›„, ë¡œê·¸ì¸ì— í•„ìš”í•œ ë ˆì´ì•„ì›ƒì„ êµ¬ì„±í•˜ì

<br>

ì¸ì¦ê³¼ í”„ë¡œí•„ê´€ë¦¬ë¥¼ ìœ„í•œ API í†µì‹ ì€ ì œê³µëœ jwt ì¸ì¦ì„œë²„ë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤.

<br><br>

# JWT ì¸ì¦ ì„œë²„ğŸ“¡

JWT ì¸ì¦ ì„œë²„ëŠ” íšŒì›ê°€ì…, ë¡œê·¸ì¸, íšŒì›ì •ë³´ í™•ì¸, í”„ë¡œí•„ ì´ë¯¸ì§€ ë³€ê²½ APIë¥¼ ì§€ì›í•˜ëŠ” ì„œë²„ê°€ ë§ˆë ¨ë˜ì–´ ìˆë‹¤.

ì„œë²„ API_URL : [https://moneyfulpublicpolicy.co.kr](https://moneyfulpublicpolicy.co.kr/)

<br>

## íšŒì›ê°€ì…

ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸, ë‹‰ë„¤ì„ìœ¼ë¡œ DBì— ë³¸ì¸ì˜ íšŒì›ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.

> Request

- Method â†’ `POST`<br>
- URL PATH â†’ `/register`
- Body
  ```json
  JSON
  {
      "id": "ìœ ì € ì•„ì´ë””",
      "password": "ìœ ì € ë¹„ë°€ë²ˆí˜¸",
      "nickname": "ìœ ì € ë‹‰ë„¤ì„"
  }
  ```

<br>

> Response

```json
{
  "message": "íšŒì›ê°€ì… ì™„ë£Œ",
  "success": true
}
```

<br>

## ë¡œê·¸ì¸

ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ DBì— ìˆëŠ” íšŒì›ì •ë³´ì™€ ì¼ì¹˜í•˜ë©´ accessToken, userId, avatar, nickname ì´ 4ê°€ì§€ ìœ ì €ì •ë³´ë¥¼ ì‘ë‹µí•´ì¤€ë‹¤.

> Request

- Method â†’ `POST`
- URL PATH â†’ `/login`
- Body
  ```json
  JSON
  {
    "id": "ìœ ì € ì•„ì´ë””",
    "password": "ìœ ì € ë¹„ë°€ë²ˆí˜¸"
  }
  ```

<br>

> Query string(ì„ íƒ)

- cessToken ìœ íš¨ì‹œê°„ ì¡°ì •ì„ ìœ„í•œ query string
  - query string ì—†ì´ pathë¡œë§Œ ìš”ì²­ ì‹œ ê¸°ë³¸ 1ì‹œê°„
  - query string (expiresIn) ìœ¼ë¡œ ì‹œê°„ ê¸°ì… ì‹œ í•´ë‹¹ ì‹œê°„ëŒ€ë¡œ í† í° ìœ íš¨ì‹œê°„ ì¡°ì •ê°€ëŠ¥
  - expiresIn : ì‹œê°„ ë‹¨ìœ„ë¥¼ ë¶™ì¸ ë¬¸ìì—´ ex) 10s 10m 10h
  - í† í°ë§Œë£Œ ì‹œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë˜ëŠ” ë¡œì§ì‹œ ì‚¬ìš© ê°€ëŠ¥

```json
/login?expiresIn=10m

// ìœ íš¨ì‹œê°„ 10ë¶„ì¸ accessToken ìš”ì²­
```

<br>

> Response

```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImFiY2FiYyIsImlhdCI6MTcwMDgxNDQyMCwiZXhwIjoxNzAwODE4MDIwfQ.8hWOHHEzDPzumnqCU7jyoi3zFhr-HNZvC7_pzBfOeuU",
  "userId": "ìœ ì € ì•„ì´ë””",
  "success": true,
  "avatar": "í”„ë¡œí•„ ì´ë¯¸ì§€",
  "nickname": "ìœ ì € ë‹‰ë„¤ì„"
}
```

<br>

## íšŒì›ì •ë³´ í™•ì¸

accessTokenì´ ìœ íš¨í•œ ê²½ìš°, ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œì™¸í•œ ë³¸ì¸ì˜ íšŒì›ì •ë³´ë¥¼ ì‘ë‹µí•´ ì¤€ë‹¤.

```js
// authorization ì†ì„± ì •ì˜
const response = await axios.get(`${BASE_URL}/user`, {
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${accessToken}`,
  },
});
```

<br>

> Request

- Method â†’ `GET`
- URL PATH â†’ `/user`
- Header
  ```json
  {
    "Authorization": "Bearer AccessToken"
  }
  ```

<br>

> Response

```json
{
  "id": "ì‚¬ìš©ì ì•„ì´ë””",
  "nickname": "ì‚¬ìš©ì ë‹‰ë„¤ì„",
  "avatar": null,
  "success": true
}
```

<br>

## í”„ë¡œí•„ ë³€ê²½

accessTokenì´ ìœ íš¨í•œ ê²½ìš°, í”„ë¡œí•„ ì´ë¯¸ì§€ ë˜ëŠ” ë‹‰ë„¤ì„ì„ FormDataì„ í†µí•´ ìš”ì²­í•˜ë©´ ë³€ê²½ ì™„ë£Œëœ ì´ë¯¸ì§€ URLê³¼ ë‹‰ë„¤ì„ì„ ì‘ë‹µí•´ì¤€ë‹¤.

```js
// ì´ë¯¸ì§€íŒŒì¼ì„ FormDataì— ë‹´ëŠ” ë°©ë²•

const formData = new FormData();
// avatarì™€ nickname ì¤‘ í•˜ë‚˜ ë˜ëŠ ëª¨ë‘ ë³€ê²½ ê°€ëŠ¥
formData.append("avatar", imgFile);
formData.append("nickname", nickname);

// ìš”ì²­ ì‹œ Content-Typeì— ìœ ì˜
const response = await axios.patch(`${BASE_URL}/profile`, formData, {
  headers: {
    "Content-Type": "multipart/form-data",
    Authorization: `Bearer ${accessToken}`,
  },
});
```

<br>

> Request

- Method â†’ `PATCH`
- URL PATH â†’ `/profile`
- Header
  ```json
  {
    "Authorization": "Bearer AccessToken"
  }
  ```
- Body
  ```json
  FORM
  {
  	"avatar": [ì´ë¯¸ì§€íŒŒì¼],
  	"nickname": "ë³€ê²½í•  ë‹‰ë„¤ì„"
  }
  ```

<br>

> Response

```json
{
  "avatar": "ë³€ê²½ëœ ì´ë¯¸ì§€ URL",
  "nickname": "ë³€ê²½ëœ ë‹‰ë„¤ì„",
  "message": "í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "success": true
}
```

<br>

# êµ¬í˜„í•˜ê¸°

```js
import axios from "axios";
const login = async (id, pw) => {
  const result = await axios.post("https://moneyfulpublicpolicy.co.kr", {
    id,
    pw,
  });
  return result.data;
};

export default login;
```

<br>

# ì°¸ì¡°

https://www.youtube.com/watch?v=KMJE9FIDZl8
