---
title: "[Network] #24 μΊμ‹μ™€ μ΅°κ±΄λ¶€ μ”μ²­"
categories: [Network]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

---

[[νΌμ κ³µλ¶€ν•λ” λ„¤νΈμ›ν¬β†—οΈ]](https://www.youtube.com/watch?v=c62qssA4hYI&list=PLVsNizTWUw7HfOCgvlfHIDPPo3TE-2iQM), μ»΄ν“¨ν„° λ„¤νΈμ›ν‚Ή: ν•ν–¥μ‹ μ ‘κ·Ό (μ 8ν)μ„ λ°”νƒ•μΌλ΅ μ •λ¦¬ν• κΈ€μ…λ‹λ‹¤.
{: .notice--danger}

<br>

# 1. μΊμ‹

## 1.1 μΊμ‹λ€?

> μΊμ‹(cache)λ€, μ‘λ‹µ λ°›μ€ μμ›μ **μ‚¬λ³Έ**μ„ μ„μ‹ μ €μ¥ν•λ” κΈ°μ μ„ μλ―Έν•λ‹¤.

- μΊμ‹λ¥Ό ν†µν•΄ μ¶”ν›„ λ™μΌν• μ”μ²­μ— λ€ν•΄ μΊμ‹λ λ°μ΄ν„°λ¥Ό ν™μ©ν•  μ μλ‹¤.
- μΊμ‹ λ•λ¶„μ— μΊμ‹ κ°€λ¥ μ‹κ°„λ™μ• λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•μ§€ μ•μ•„λ„ λλ‹¤. (λΉ„μ‹Ό λ„¤νΈμ›ν¬ μ‚¬μ©λ‰μ„ μ¤„μΌ μ μμ)
  λΈλΌμ°μ € λ΅λ”© μ†λ„κ°€ λ§¤μ° λΉ λ¥΄λ‹¤.
- λ¶ν•„μ”ν• λ€μ—­ν­ λ‚­λΉ„ λ°©μ§€, μ‘λ‹µ μ§€μ—° λ°©μ§€, λΉ λ¥Έ μμ› μ ‘κ·Ό κ°€λ¥<br><br>

  | **μΊμ‹ μ ν•**      | **μ„¤λ…**                                         |
  | ------------------ | ------------------------------------------------ |
  | **κ°μΈ μ „μ© μΊμ‹** | μ›Ή λΈλΌμ°μ €μ— μ €μ¥                               |
  | **κ³µμ© μΊμ‹**      | ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ— μ„μΉν• μ¤‘κ°„ μ„λ²„μ— μ €μ¥ |

  ![](/assets/images/2025/2025-01-02-09-44-12.png)
  ![](/assets/images/2025/2025-01-02-09-46-01.png)

<br>

## 1.2 μΊμ‹ μ‹ μ„ λ„μ κ²€μ‚¬μ™€ μ μ§€

> μΊμ‹λ” μμ›μ **μ‚¬λ³Έ**μ„ μ €μ¥ν•λ‹¤. μ¦‰, μΊμ‹λ λ°μ΄ν„°λ” μ–Έμ λ“ μ§€ μ›λ³Έ λ°μ΄ν„°μ™€ λ‹¬λΌμ§ μ μλ‹¤.

- λ”°λΌμ„ μΊμ‹ μ‹ μ„ λ„λ¥Ό κ³ λ ¤ν•΄μ•Όν•λ‹¤.
- μΊμ‹ μ‹ μ„ λ„: μΊμ‹λ μ‚¬λ³Έ λ°μ΄ν„°κ°€ μ–Όλ§λ‚ μ›λ³Έ λ°μ΄ν„°μ™€ μ μ‚¬ν•μ§€λ¥Ό ν‘ν„
- κ·Έλ ‡λ‹¤λ©΄, μ–΄λ–»κ² μΊμ‹ μ‹ μ„ λ„λ¥Ό κ²€μ‚¬ν•  μ μμ„κΉ?<br><br>
  ![](/assets/images/2024/2024-12-31-15-25-12.png)

<br>

> μΊμ‹ μ‹ μ„ λ„ κ²€μ‚¬: μ ν¨ κΈ°κ°„ μ„¤μ •

- μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•λ©΄, μ„λ²„λ¥Ό ν†µν•΄ μ›λ³Έ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ΅°νν•κ³ , μΊμ‹λ¥Ό κ°±μ‹ ν•λ‹¤.
- μ΄λ• λ‹¤μ‹ λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒν•λ‹¤.<br><br>
  ![](/assets/images/2025/2025-01-02-09-48-17.png)

<br>

> μ ν¨ κΈ°κ°„ μ„¤μ • λ°©λ²•

- μ‘λ‹µ λ©”μ‹μ§€μ Expires ν—¤λ”(λ‚ μ§)μ™€ Cache-Control ν—¤λ”μ Max-Age κ°’(μ΄)μ„ μ‚¬μ©
- e.g., μΊμ‹μ μ ν¨ μ‹κ°„μ„ 2024λ…„ 2μ›” 6μΌ ν™”μ”μΌ 12:00:00λ΅ μ„¤μ •, λλ” 1200μ΄λ΅ μ„¤μ •ν•λ” μ‘λ‹µ λ©”μ‹μ§€<br><br>
  ![](/assets/images/2024/2024-12-31-15-27-49.png)

```
μ ν¨ κΈ°κ°„μ΄ λλ‚¬λ‹¤κ³  κ°€μ •ν–μ„ λ•, μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό μ²μλ¶€ν„° λ‹¤μ‹ μƒλ΅­κ² κ°±μ‹ ν•΄μ•Ό ν• κΉ?
κ·Έλ ‡μ§€ μ•λ‹¤. μ ν¨ κΈ°κ°„μ΄ λλ‚¬λ”λΌλ„, μ„λ²„μ μ›λ³Έ λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μ•λ‹¤λ©΄ κ·Έλƒ¥ μΊμ‹λ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•λ©΄ λ  κ²ƒμ΄λ‹¤.
```

<br><br>

# 2. κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­(1)

## 2.1 μΊμ‹ μ‹κ°„ μ΄κ³Ό

> μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•΄μ„ μ„λ²„μ— λ‹¤μ‹ μ”μ²­ν•λ©΄ λ‹¤μ λ‘ κ°€μ§€ μƒν™©μ΄ λ‚νƒ€λ‚λ‹¤.

1. μ„λ²„μ—μ„ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•μ§€ μ•μ
2. μ„λ²„μ—μ„ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•¨
   - μ΄ μƒν™©μ—μ„λ” λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” λ€μ‹ μ— μ €μ¥ν•΄ λ‘μ—λ μΊμ‹λ¥Ό μ¬μ‚¬μ© ν•  μ μλ‹¤.
   - λ‹¨ ν΄λΌμ΄μ–ΈνΈμ λ°μ΄ν„°μ™€ μ„λ²„μ λ°μ΄ν„°κ°€ κ°™λ‹¤λ” μ‚¬μ‹¤μ„ ν™•μΈν•  μ μλ” λ°©λ²• ν•„μ”ν•λ‹¤. β†’ κ²€μ¦ ν—¤λ” ν•„μ”<br><br>
     ![](/assets/images/2025/2025-01-02-09-53-18.png)

<br>

> κ²€μ¦ ν—¤λ”μ μ—­ν• 

κ²€μ¦ ν—¤λ”λ” ν΄λΌμ΄μ–ΈνΈμ μΊμ‹ λ°μ΄ν„°μ™€ μ„λ²„μ λ°μ΄ν„°κ°€ λ™μΌν•μ§€ ν™•μΈν•λ” λ° μ‚¬μ©λλ‹¤.

<br>

## 2.2 κ²€μ¦ ν—¤λ” μ¶”κ°€ (μΊμ‹ μ‹ μ„ λ„ μ¬ κ²€μ‚¬)

### 2.2.1 If-Modified-Since ν—¤λ”

- λ‚ μ§λ¥Ό κΈ°λ°μΌλ΅ μ„λ²„μ—κ² λ¬Όμ–΄λ³΄λ” λ°©λ²•μ΄λ‹¤.
- If-Modified-Since ν—¤λ”μ— λ…μ‹λ μ‹μ  μ΄ν›„λ΅ μ›λ³Έμ— λ³€κ²½μ΄ μμ—λ‹¤λ©΄ κ·Έλ•λ§ μƒ μμ›μΌλ΅ μ‘λ‹µν•λ„λ΅ μ„λ²„μ—κ² μ”μ²­ν•λ” ν—¤λ”μ΄λ‹¤.<br><br>
  ![](/assets/images/2025/2025-01-02-10-09-20.png)

<br>

- μ•„λλ” "2024λ…„ 8μ›” 23μΌ κΈμ”μΌ 09:00:00 μ΄ν›„μ— www.example.com/index.htmlμ μμ›μ΄ λ³€κ²½ λμ—μ„ κ²½μ°μ—λ§ μƒ μμ›μΌλ΅ μ‘λ‹µν•λΌ"λ” μ”μ²­ λ©”μ‹μ§€μ΄λ‹¤.<br><br>
  ![](/assets/images/2024/2024-12-31-15-33-21.png)

<br>

### 2.2.2 μ„λ²„μ Last-Modified ν—¤λ”

- μƒνƒ μ½”λ“ 304(not Modified)λ¥Ό ν†µν• μμ›μ "λ³€κ²½ μ—¬λ¶€" λΏλ§ μ•„λ‹λΌ, μμ›μ΄ λ§μ§€λ§‰μΌλ΅ μν–‰λ μ‹μ λ„ μ•λ ¤μ¤„ μ μλ‹¤.
- 304(not Modified)λ” μμ›μ΄ λ³€κ²½λμ§€ μ•μ•μ„ κ²½μ° μ‘λ‹µν•λ” μƒνƒ μ½”λ“μ΄λ‹¤.
- μ¦‰, "μΊμ‹λ λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μ•μΌλ‹ κ·Έλ€λ΅ μ“°μ„Έμ”" κ°€ 304(not Modified)μΈ κ²ƒμ΄λ‹¤.
- μ•„λλ” 2019λ…„ 10μ›” 17μΌ λ©μ”μΌ 7μ‹ 18λ¶„ 26μ΄μ— λ³€κ²½ λμ—μμ„ μ• μ μλ‹¤.<br><br>
  ![](/assets/images/2024/2024-12-31-15-36-20.png)

<br>

## 2.3 κ²€μ¦ ν—¤λ” λ™μ‘ κ³Όμ •

> μ²« λ²μ§Έ μ”μ²­

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ‹¤. (GET /star.jpg)
2. μ„λ²„λ” λ¦¬μ†μ¤λ¥Ό μ „μ†΅ν•λ©°, ν—¤λ”μ— Last-Modified ν¬ν•¨ν•λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈλ” μ‘λ‹µ λ°μ΄ν„°λ¥Ό μΊμ‹μ— μ €μ¥ν•λ‹¤.<br><br>
   ![](/assets/images/2025/2025-01-02-10-06-44.png)

<br>

> λ‘ λ²μ§Έ μ”μ²­ (μΊμ‹ λ§λ£ ν›„)

β‘  μΊμ‹ μ ν¨ μ‹κ°„μ΄ μ΄κ³Όν•λ©΄ ν΄λΌμ΄μ–ΈνΈλ” κΈ°μ΅΄μ Last-Modified κ°’μ„ μ΄μ©ν•΄ μ΅°κ±΄λ¶€ μ”μ²­μ„ λ³΄λ‚Έλ‹¤.

![](/assets/images/2025/2025-01-02-10-11-36.png)

<br>

β‘΅ λ°μ΄ν„°κ°€ μμ •λμ§€ μ•μ€ κ²½μ° "304 Not Modified + ν—¤λ” λ©”νƒ€ μ •λ³΄" λ§ μ‘λ‹µν•λ‹¤.(λ°”λ””X)

- λ°μ΄ν„°μ μµμΆ… μμ •μΌμ΄ λ‘κ°™μ€ κ²½μ° λ°μ΄ν„°κ°€ μμ •λμ§€ μ•μ€ μƒνƒμ΄λ‹¤.
- HTTP Bodyλ” μ—†λ‹¤. (λ„¤νΈμ›ν¬ λΉ„μ© μ κ°)
- ν΄λΌμ΄μ–ΈνΈλ” κΈ°μ΅΄ μΊμ‹ λ°μ΄ν„°λ¥Ό μ¬μ‚¬μ©ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ³΄λ‚Έ μ‘λ‹µ ν—¤λ” μ •λ³΄λ΅ μΊμ‹μ λ©”νƒ€ μ •λ³΄λ¥Ό κ°±μ‹ 
- κ²°κ³Όμ μΌλ΅ λ„¤νΈμ›ν¬ λ‹¤μ΄λ΅λ“κ°€ λ°μƒν•μ§€λ§ μ©λ‰μ΄ μ μ€ ν—¤λ” μ •λ³΄λ§ λ‹¤μ΄λ΅λ“ν•λ‹¤. β†’ λ§¤μ° μ‹¤μ©μ μΈ ν•΄κ²°μ±…<br><br>
  ![](/assets/images/2025/2025-01-02-10-20-15.png)

<br>

- λ°μ΄ν„°κ°€ μμ •λ κ²½μ°
  - μƒνƒ μ½”λ“ 200 OKμ™€ ν•¨κ» μƒ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ‹¤.
  - ν΄λΌμ΄μ–ΈνΈλ” κΈ°μ΅΄ μΊμ‹λ¥Ό μ—…λ°μ΄νΈν•λ‹¤.

<br><br>

# 3. κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­(2)

## 3.1 κ²€μ¦ ν—¤λ”μ μ—­ν• 

> κ²€μ¦ ν—¤λ”μ μ—­ν• 

κ²€μ¦ ν—¤λ”λ” ν΄λΌμ΄μ–ΈνΈμ μΊμ‹ λ°μ΄ν„°μ™€ μ„λ²„ λ°μ΄ν„°κ°€ λ™μΌν•μ§€ ν™•μΈν•λ” λ° μ‚¬μ©λλ‹¤.

<br>

> κ²€μ¦ ν—¤λ”μ μΆ…λ¥

ν¬κ² Last-Modifiedμ™€ ETagλ΅ κµ¬λ¶„λλ‹¤.

| **μ΅°κ±΄λ¶€ μ”μ²­/μ‘λ‹µ ν—¤λ”**             | **μ„¤λ…**                                       |
| ------------------------------------- | ---------------------------------------------- |
| **Last-Modified / If-Modified-Since** | λ°μ΄ν„°μ μµμΆ… μμ • μ‹κ°μ„ κΈ°μ¤€μΌλ΅ μ”μ²­/μ‘λ‹µ   |
| **ETag / If-None-Match**              | λ°μ΄ν„°λ¥Ό μ‹λ³„ν•  κ³ μ  νƒκ·Έλ¥Ό κΈ°λ°μΌλ΅ μ”μ²­/μ‘λ‹µ |

<br>

> μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

- μ„λ²„ λ°μ΄ν„°μ λ³€κ²½ μ—¬λ¶€μ— λ”°λΌ μ΅°κ±΄λ¶€λ΅ μ‘λ‹µμ„ μ „μ†΅ν•λ‹¤.
  - 200 OK: λ°μ΄ν„° λ³€κ²½(HTTP Body ν¬ν•¨)
  - 304 Not Modified: λ°μ΄ν„° λ―Έλ³€κ²½(HTTP Body μ μ™Έ)

<br>

## 3.2 Last-Modifiedμ™€ If-Modified-Sinceμ ν•κ³„

- 1μ΄ λ―Έλ§ λ‹¨μ„ μΊμ‹λ΅ μΊμ‹ μ΅°μ •μ΄ λ¶κ°€λ¥
- λ‚ μ§ κΈ°λ° λ΅μ§μ΄λ―€λ΅ μ„Έλ°€ν• μΊμ‹ κ΄€λ¦¬κ°€ μ–΄λ µλ‹¤.
  - λ°μ΄ν„°λ¥Ό μμ •ν•΄μ„ λ‚ μ§κ°€ λ‹¤λ¥΄μ§€λ§, κ°™μ€ λ°μ΄ν„°λ¥Ό μμ •ν•΄μ„ κ²°κ³Όκ°€ λ‘κ°™μ€ κ²½μ°μ—λ„ μ „μ²΄ λ°μ΄ν„°λ¥Ό λ‹¤ λ‹¤μ‹ λ‹¤μ΄λ΅λ“ ν•λ‹¤.
- μ„λ²„μ—μ„ λ³„λ„μ μΊμ‹ λ΅μ§μ„ μ μ©ν•κΈ° νλ“¤λ‹¤.
  - e.g., μ£Όμ„, κ³µλ°± λ“± ν¬κ² μν–¥μ΄ μ—†λ” λ³€κ²½μ—μ„ μΊμ‹λ¥Ό μ μ§€ν•κ³  μ‹¶μ€ κ²½μ° μΊμ‹ λ©”μ»¤λ‹μ¦μ„ μ»¨νΈλ΅¤ν•κΈ° νλ“¤λ‹¤.

<br>

## 3.3 ETagμ™€ If-None-Match ν—¤λ”

μ„λ²„μ—μ„ μΊμ‹ λ©”μ»¤λ‹μ¦μ„ μ»¨νΈλ΅¤ ν•  μ μλ” λ°©λ²•μ΄λ‹¤.

<br>

### 3.3.1 ETag (Entity Tag)

> ETagλ€?

- ETagλ€, μμ›μ λ²„μ „μ„ μ‹λ³„ν•λ” μ •λ³΄μ΄λ‹¤.
- μΊμ‹μ© λ°μ΄ν„°μ κ³ μ ν• λ²„μ „ μ΄λ¦„μ„ λ¶€μ—¬ν•μ—¬ λ³€κ²½ μ—¬λ¶€λ¥Ό μ¶”μ ν•λ‹¤.
- μ„λ²„μ—μ„ λ°μ΄ν„°κ°€ λ³€κ²½ν•  λ•λ§λ‹¤ μƒλ΅μ΄ ETag κ°’μ„ μƒμ„±ν•λ‹¤.

<br>

> νΉμ§•

- λ°μ΄ν„°κ°€ λ³€κ²½λλ©΄ ETag κ°’μ΄ κ°±μ‹ λλ‹¤.
- λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μΌλ©΄ ETag κ°’λ„ μ μ§€λλ‹¤.
- μΌλ°μ μΌλ΅ λ°μ΄ν„°μ Hash κ°’μ„ κΈ°λ°μΌλ΅ ETagκ°€ μƒμ„±λλ‹¤.<br><br>
  ![](/assets/images/2024/2024-12-31-15-42-39.png)

<br>

### 3.3.2 If-None-Match ν—¤λ”

> ν΄λΌμ΄μ–ΈνΈκ°€ ETag κ°’μ„ μ„λ²„λ΅ μ „μ†΅ν•μ—¬ μμ›μ΄ λ³€κ²½λμ—λ”μ§€ ν™•μΈν•λ‹¤.

- ν΄λΌμ΄μ–ΈνΈλ” κΈ°μ΅΄ μΊμ‹ λ°μ΄ν„°μ ETag κ°’μ„ μ„λ²„μ— If-None-Match ν—¤λ”λ΅ λ³΄λ‚Έλ‹¤.
- μ„λ²„λ” μ”μ²­μ— ν¬ν•¨λ ETag κ°’μ„ λΉ„κµν•μ—¬ μμ›μ λ³€κ²½ μ—¬λ¶€λ¥Ό νλ³„ν•λ‹¤.
- β­ μΊμ‹ μ μ–΄ λ΅μ§μ„ μ„λ²„μ—μ„ μ™„μ „ν κ΄€λ¦¬ν•κ³ , ν΄λΌμ΄μ–ΈνΈλ” λ‹¨μν μ΄ κ°’μ„ μ„λ²„μ— μ κ³µν•λ‹¤. (ν΄λΌμ΄μ–ΈνΈλ” μΊμ‹ λ©”μ»¤λ‹μ¦μ„ λ¨λ¦„)
- μ§„μ§ λ‹¨μν•κ² ETagλ§ λ³΄λ‚΄μ„ κ°™μΌλ©΄ μ μ§€, λ‹¤λ¥΄λ©΄ λ‹¤μ‹ λ°›κΈ°

<br>

> μ„λ²„ μ‘λ‹µ μ‚¬λ΅€

- λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈλ” Etag κ°’κ³Ό μΌμΉν•λ” μμ›μ΄ μλ‹? λΌκ³  μ„λ²„μ—κ² λ¬Όμ–΄λ΄„μΌλ΅μ¨ λ³€κ²½μ‚¬ν•­μ΄ μλ”μ§€ ν™•μΈν•  μ μλ‹¤.
- μ•„λλ” "Etag κ°’μ΄ abcμΈ `www.example.com/index.html`μ΄λΌλ” μμ›μ΄ μλ‹? μμ›μ΄ λ³€κ²½λμ—λ‹¤λ©΄(Etag κ°’μ΄ λ°”λ€μ—λ‹¤λ©΄) κ·Έλ•λ§ μƒ μμ›μΌλ΅ μ‘λ‹µν•΄μ¤" λΌλ” λ©”μ‹μ§€μ΄λ‹¤.<br><br>
  ![](/assets/images/2024/2024-12-31-15-44-27.png)

<br>

> μμ›μ΄ λ³€κ²½λμ§€ μ•μ€ κ²½μ°

- μ„λ²„λ” 304 Not Modified μƒνƒ μ½”λ“λ¥Ό λ°ν™ν•λ©°, ν—¤λ” μ •λ³΄λ§ μ „μ†΅ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μΊμ‹μ— μ €μ¥λ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό κ·Έλ€λ΅ μ‚¬μ©ν•λ‹¤.<br><br>
  ![](/assets/images/2025/2025-01-03-00-40-52.png)

<br>

> μμ›μ΄ λ³€κ²½λ κ²½μ°

- μ„λ²„λ” 200 OK μƒνƒ μ½”λ“μ™€ ν•¨κ» λ³€κ²½λ μμ›μ„ μ „μ†΅ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό μΊμ‹μ— μ €μ¥ν•λ‹¤.

<br>

> μ¥μ 

- ν¨μ¨μ μΈ λ„¤νΈμ›ν¬ μ‚¬μ©
  - μμ›μ΄ λ³€κ²½λμ§€ μ•μ€ κ²½μ°, λ°μ΄ν„° μ „μ†΅μ„ μµμ†ν™” (304 Not Modifie)
- μ„λ²„ μ¤‘μ‹¬ μΊμ‹ μ μ–΄
  - μ„λ²„κ°€ μΊμ‹ μ ν¨μ„±μ„ νλ‹¨ν•κ³ , ν•„μ”ν• κ²½μ°μ—λ§ λ°μ΄ν„°λ¥Ό κ°±μ‹ ν•λ‹¤.

<br><br>

# 4. μΊμ‹μ™€ μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

## 4.1 μΊμ‹ μ μ–΄ ν—¤λ”

### 4.1.1 Cache-Control: μΊμ‹ μ μ–΄

> Cache-Controlν—¤λ”λ” μΊμ‹ λ™μ‘μ„ μ μ–΄ν•λ” λ‹¤μ–‘ν• μΊμ‹ μ§€μ‹μ–΄ (directives)λ¥Ό μ κ³µν•λ‹¤.

| **ν—¤λ”**                    | **μ„¤λ…**                                                                      |
| --------------------------- | ----------------------------------------------------------------------------- |
| **Cache-Control: max-age**  | μΊμ‹ μ ν¨ μ‹κ°„μ„ μ΄λ‹¨μ„λ΅ μ„¤μ •ν•λ‹¤.                                           |
| **Cache-Control: no-cache** | λ°μ΄ν„°λ¥Ό μΊμ‹ν•΄λ„ λμ§€λ§, ν•­μƒ μ›(origin) μ„λ²„μ— κ²€μ¦ ν›„ μ‚¬μ©ν•λ‹¤.            |
| **Cache-Control: no-store** | λ―Όκ°ν• μ •λ³΄κ°€ ν¬ν•¨λ λ°μ΄ν„°λ” μ €μ¥ν•μ§€ μ•κ³  λ©”λ¨λ¦¬μ—μ„ μ‚¬μ© ν›„ μ¦‰μ‹ μ‚­μ ν•λ‹¤. |

<br>

### 4.1.2 Pragma: μΊμ‹ μ μ–΄ (ν•μ„ νΈν™)

> `Pragma: no-cache`μ€ HTTP/1.0μ—μ„ μ‚¬μ©λ μΊμ‹ μ μ–΄ ν—¤λ”λ΅, ν„μ¬λ” κ±°μ μ‚¬μ©λμ§€ μ•λ”λ‹¤.

HTTP/1.1 μ΄ν›„μ—λ” `Cache-Control`μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μΌλ°μ μ΄λ‹¤.

<br>

### 4.1.3 Expires: μΊμ‹ μ ν¨ κΈ°κ°„ (ν•μ„ νΈν™)

> `Expires`λ” μΊμ‹ λ§λ£μΌμ„ μ •ν™•ν• λ‚ μ§λ΅ μ„¤μ •ν•λ‹¤.

- e.g., `expires: Mon, 01 Jan 1990 00:00:00 GMT`
- HTTP 1.0λ¶€ν„° μ‚¬μ©λμ—μΌλ‚, μ§€κΈμ€ λ” μ μ—°ν• `Cache-Control: max-age`λ¥Ό κ¶μ¥ν•λ‹¤.
- `Cache-Control: max-age`κ°€ μ„¤μ •λ κ²½μ°, `Expires`λ” λ¬΄μ‹λλ‹¤.

<br>

## 4.2 κ²€μ¦ ν—¤λ”μ™€ μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

> κ²€μ¦ ν—¤λ” (Validator)

- μ„λ²„κ°€ μΊμ‹λ λ°μ΄ν„°μ μ ν¨μ„±μ„ ν™•μΈν•λ” λ° μ‚¬μ©λλ‹¤.
- ETag
  - λ°μ΄ν„°μ κ³ μ ν• λ²„μ „ μ΄λ¦„μ„ λ‚νƒ€λ‚Έλ‹¤.
  - e.g., `ETag: "v1.0"`, `ETag: "asid93jkrh2l"`
- Last-Modified
  - λ°μ΄ν„°κ°€ λ§μ§€λ§‰μΌλ΅ μμ •λ μ‹μ μ„ λ‚νƒ€λ‚Έλ‹¤.
  - e.g., `Last-Modified: Thu, 04 Jun 2020 07:19:24 GMT`

<br>

> μ΅°κ±΄λ¶€ μ”μ²­ ν—¤λ”

- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•  λ•, μ΅°κ±΄μ— λ”°λΌ μ‘λ‹µμ„ μ μ–΄ν•λ” ν—¤λ”μ΄λ‹¤.
- ETag κΈ°λ°:

  - `If-Match`: μ„λ²„κ°€ μ κ³µν• λ°μ΄ν„°μ ETag κ°’κ³Ό μ”μ²­ λ°μ΄ν„°μ ETag κ°’μ΄ μΌμΉν•΄μ•Ό μ”μ²­μ„ μ²λ¦¬ν•λ‹¤.
  - `If-None-Match`: μ„λ²„μ ETag κ°’μ΄ μ”μ²­ λ°μ΄ν„°μ ETag κ°’κ³Ό λ‹¤λ¥Ό κ²½μ° μ”μ²­μ„ μ²λ¦¬ν•λ‹¤.

- Last-Modified κΈ°λ°
  - `If-Modified-Since`: μ§€μ •λ λ‚ μ§ μ΄ν›„ λ°μ΄ν„°κ°€ λ³€κ²½λ κ²½μ° μ”μ²­μ„ μ²λ¦¬ν•λ‹¤.
  - `If-Unmodified-Since`: μ§€μ •λ λ‚ μ§ μ΄μ „ λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μ€ κ²½μ° μ”μ²­μ„ μ²λ¦¬ν•λ‹¤.

<br><br>

# 5. ν”„λ΅μ‹ μΊμ‹

## 5.1 μ› μ„λ²„ μ§μ ‘ μ ‘κ·Ό

> ν•κµ­μ— μλ” ν΄λΌμ΄μ–ΈνΈκ°€ λ―Έκµ­μ— μλ” μ› μ„λ²„(origin server)μ— μ§μ ‘ μ ‘κ·Όν•λ©΄, μ§€μ—° μ‹κ°„μ΄ ν¬λ©° μ„λ²„ λ¶€ν•κ°€ μ¦κ°€ν•λ‹¤.

![](/assets/images/2025/2025-01-03-01-09-34.png)

<br>

## 5.2 ν”„λ΅μ‹ μΊμ‹ λ„μ…

> ν”„λ΅μ‹ μΊμ‹λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ› μ„λ²„ μ‚¬μ΄μ— μ„μΉν•μ—¬, μ”μ²­ λ° μ‘λ‹µ λ°μ΄ν„°λ¥Ό μΊμ‹±ν•΄ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¨λ‹¤.

- μ²« λ²μ§Έ μ”μ²­
  - ν”„λ΅μ‹ μΊμ‹ μ„λ²„κ°€ λ°μ΄ν„°κ°€ μ—†μΌλ―€λ΅ μ› μ„λ²„μ— μ”μ²­μ„ μ „λ‹¬ν•λ‹¤.
  - e.g.,
    - μ›Ή λΈλΌμ°μ € 1: μ‘λ‹µ μ‹κ°„ 100ms (ν”„λ΅μ‹ μΊμ‹ μ‘λ‹µ μ‹κ°„) + 400ms (μ› μ„λ²„ μ ‘κ·Ό) = 500ms
    - μ›Ή λΈλΌμ°μ € 2, 3: 500ms<br><br>
- λ‘ λ²μ§Έ μ”μ²­ μ΄ν›„
  - λ°μ΄ν„°κ°€ μΊμ‹±λλ©΄, ν”„λ΅μ‹ μΊμ‹ μ„λ²„κ°€ μ§μ ‘ μ‘λ‹µν•λ‹¤.
  - e.g., μ›Ή λΈλΌμ°μ € 1, 2, 3: μ‘λ‹µ μ‹κ°„ 100ms (ν”„λ΅μ‹ μΊμ‹λ§ μ‘λ‹µ)<br><br>
    ![](/assets/images/2025/2025-01-03-01-15-42.png)

<br>

## 5.3 μΊμ‹μ μΆ…λ¥

> Private μΊμ‹

- ν΄λΌμ΄μ–ΈνΈ λΈλΌμ°μ €μ™€ κ°™μ€ private μΊμ‹μ—λ§ λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ‹¤. (κΈ°λ³Έκ°’)
- `Cache-Control: private`κ°€ μ„¤μ •λμ—μ„ λ• μ‚¬μ©λλ‹¤.

> Public μΊμ‹

- μ—¬λ¬ μ‚¬μ©μκ°€ κ³µμ ν•λ” μΊμ‹ (public μΊμ‹)μ— λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ‹¤.
- `Cache-Control: public`μ΄ μ„¤μ •λ μ‘λ‹µμ΄ μ €μ¥λλ‹¤.

> ν”„λ΅μ‹ μΊμ‹ (κ³µμ© μΊμ‹)

- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ—μ„ λ™μ‘ν•λ©°, μΊμ‹λ λ°μ΄ν„°λ¥Ό μ¬μ‚¬μ©ν•΄ μ„λ²„ λ¶€ν•λ¥Ό μ¤„μ΄κ³  μ‘λ‹µ μ‹κ°„μ„ λ‹¨μ¶•ν•λ‹¤.
- `Cache-Control: s-maxage`: ν”„λ΅μ‹ μΊμ‹μ—λ§ μ μ©λλ” `max-age` μ„¤μ •μ„ μ •μν•λ‹¤.

> Age: 60 (HTTP ν—¤λ”)

μ‘λ‹µ λ°μ΄ν„°κ°€ μ› μ„λ²„μ—μ„ μƒμ„±λ ν›„, ν”„λ΅μ‹ μΊμ‹μ— λ¨Έλ¬Έ μ‹κ°„μ„ λ‚νƒ€λ‚Έλ‹¤.

<br><br>

# 6. Cache-Control: ν™•μ‹¤ν• μΊμ‹ λ¬΄ν¨ν™”

## 6.1 ν™•μ‹¤ν• μΊμ‹ λ¬΄ν¨ν™”λ¥Ό μ„ν• μΊμ‹ μ§€μ‹μ–΄

> π’΅ μ„λ²„ μΈ΅μ—μ„ HTTP μ‘λ‹µ μ½”λ“λ¥Ό μ„¤κ³„ν•  λ•, ν™•μ‹¤ν• μΊμ‹ λ¬΄ν¨ν™”λ¥Ό ν•κΈ° μ„ν•΄μ„ `Cache-Control: no-cache, no-store, must-revalidate`λ¥Ό λ„£μ–΄μ£Όκ³ , νΉμ‹ HTTP ν•μ„ νΈν™κΉμ§€ μƒκ°ν•΄μ„ `Pragma: no-cache`λ¥Ό λ„£μ–΄μ¤μ•Ό ν•λ‹¤.

 <br>

### 6.1.1 Cache-Control: no-cache

> λ°μ΄ν„°λ¥Ό μΊμ‹ν•  μ μμ§€λ§, ν•­μƒ μ› μ„λ²„μ— κ²€μ¦ν•κ³  μ‚¬μ©ν•΄μ•Ό ν•λ‹¤. (μ΄λ¦„μ— μ£Όμ! )

- μ› μ„λ²„ κ²€μ¦ μ—†μ΄ μΊμ‹ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.
- λ‹¨, κ²€μ¦ ν›„ 304 Not Modified μ‘λ‹µμ„ λ°›μ•„ μΊμ‹ λ°μ΄ν„°λ¥Ό μ¬μ‚¬μ©μ„ ν•  μ μλ‹¤.
- e.g., λΈλΌμ°μ €κ°€ λ°μ΄ν„°λ¥Ό μΊμ‹±ν•λ”λΌλ„, μ”μ²­ μ‹ μ„λ²„λ΅λ¶€ν„° ETag λλ” Last-Modifiedλ΅ λ°μ΄ν„° μ ν¨μ„±μ„ ν™•μΈν•λ‹¤.

<br>

### 6.1.2 Cache-Control: no-store

> λ°μ΄ν„°κ°€ λ―Όκ°ν• μ •λ³΄λ¥Ό ν¬ν•¨ν•λ―€λ΅, μ €μ¥ν•μ§€ μ•κ³  λ©”λ¨λ¦¬μ—μ„λ§ μ‚¬μ© ν›„ μ¦‰μ‹ μ‚­μ ν•΄μ•Ό ν•λ‹¤.

e.g., κ°μΈμ •λ³΄, κΈμµ μ •λ³΄

<br>

### 6.1.3 Cache-Control: must-revalidate

> μΊμ‹κ°€ λ§λ£λ κ²½μ°, λ°λ“μ‹ μ› μ„λ²„ κ²€μ¦μ„ μν–‰ν•΄μ•Ό ν•λ‹¤.

- μΊμ‹ μ ν¨ μ‹κ°„ λ‚΄μ—μ„λ” μΊμ‹ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•λ‹¤.
- μΊμ‹ λ§λ£ ν›„μ—λ” λ°λ“μ‹ μ› μ„λ²„λ¥Ό ν™•μΈν•΄μ•Όν•λ‹¤.
- μ› μ„λ²„ μ ‘κ·Ό μ‹¤ν¨ μ‹ λ°λ“μ‹ 504 Gateway Timeout μ¤λ¥κ°€ λ°μƒν•΄μ•Ό ν•λ‹¤.

<br>

### 6.1.4 Pragma: no-cache

> HTTP/1.0 ν•μ„ νΈν™μ„ μ„ν• μ§€μ‹μ–΄μ΄λ‹¤.

<br><br>

# 7. no-cache vs must-revalidate

## 7.1 no-cache λ™μ‘ λ°©μ‹

1. ν΄λΌμ΄μ–ΈνΈ μ”μ²­ μ‹, λ°μ΄ν„°κ°€ μΊμ‹λμ–΄ μλ”λΌλ„ μ› μ„λ²„ κ²€μ¦(Etag, Last-Modified)μ„ ν†µν•΄ μ ν¨μ„±μ„ ν™•μΈν•λ‹¤.
2. μ› μ„λ²„ κ²€μ¦ ν›„
   - λ°μ΄ν„°κ°€ λ™μΌ: 304 Not Modified μ‘λ‹µ.
   - λ°μ΄ν„° λ³€κ²½λ¨: 200 OK μ‘λ‹µκ³Ό μƒλ΅μ΄ λ°μ΄ν„° μ κ³µ.<br><br>
     ![](/assets/images/2025/2025-01-03-01-33-28.png)

<br>

> λ§μ•½ μ› μ„λ²„ μ ‘κ·Όμ„ μ‹¤ν¨ν•λ‹¤λ©΄?

μΊμ‹ μ„λ²„ μ„¤μ •μ— λ”°λΌ μ¤λ¥(504) λλ” κΈ°μ΅΄ λ°μ΄ν„°(200 OK)λ¥Ό λ°ν™ν•  μ μλ‹¤.

![](/assets/images/2025/2025-01-03-01-35-20.png)

<br>

## 7.2 must-revalidate λ™μ‘ λ°©μ‹

1. μΊμ‹κ°€ λ§λ£λ κ²½μ°, ν•­μƒ μ› μ„λ²„ κ²€μ¦μ΄ ν•„μ”ν•λ‹¤.
2. μ› μ„λ²„ κ²€μ¦ ν›„
   - λ°μ΄ν„°κ°€ λ™μΌ: 304 Not Modified μ‘λ‹µ.
   - λ°μ΄ν„° λ³€κ²½λ¨: 200 OK μ‘λ‹µκ³Ό μƒλ΅μ΄ λ°μ΄ν„° μ κ³µ.

<br>

> λ§μ•½ μ› μ„λ²„ μ ‘κ·Όμ„ μ‹¤ν¨ν•λ‹¤λ©΄?

- **ν•­μƒ μ¤λ¥(504 Gateway Timeout)** κ°€ λ°ν™λλ‹¤.
- μ‚¬μ© μ‚¬λ΅€: λ°μ΄ν„°μ μ •ν™•μ„±μ΄ μ λ€μ μΌλ΅ μ¤‘μ”ν• κ²½μ° (e.g., κΈμµ κ±°λ, μλ£ λ°μ΄ν„°)<br><br>
  ![](/assets/images/2025/2025-01-03-01-37-56.png)

<br>
