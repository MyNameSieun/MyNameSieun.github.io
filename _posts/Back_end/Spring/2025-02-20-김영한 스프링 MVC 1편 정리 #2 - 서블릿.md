---
title: "[Spring] ê¹€ì˜í•œ ìŠ¤í”„ë§ MVC 1í¸ ì •ë¦¬ #2 - ì„œë¸”ë¦¿"
categories: [Spring]
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

ì„œë¸”ë¦¿ì€ Javaë¥¼ ì‚¬ìš©í•  ë•Œ ì›¹ í˜ì´ì§€ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ì„œë²„ì¸¡ í”„ë¡œê·¸ë¨ì´ë‹¤.

ì›¹ ìš”ì²­ê³¼ ì‘ë‹µì˜ íë¦„ì„ ê°„ë‹¨í•œ ë©”ì„œë“œ í˜¸ì¶œë§Œìœ¼ë¡œ ì²´ê³„ì ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. (WAS ë‚´ë¶€ì—ì„œ ì‹¤í–‰)

ì´ë¥¼ í†µí•´ HTTP ìš”ì²­ ë°ì´í„°ì™€ ì‘ë‹µ ë°ì´í„°ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³ ë¯¼í•  ìˆ˜ ìˆìœ¼ë©°, ì£¼ë¡œ ì–´ë–¤ ë°©ì‹ì´ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œì•„ë³´ì.

<br>

# 1. í”„ë¡œì íŠ¸ ì„¸íŒ…

## 1.1 í”„ë¡œì íŠ¸ ìƒì„±

> ì‚¬ì „ ì¤€ë¹„ë¬¼

- Java 17 ì´ìƒ ì„¤ì¹˜
- IDE: IntelliJ ì„¤ì¹˜

> [ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„° ì‚¬ì´íŠ¸](https://start.spring.io)ë¡œ ì´ë™í•´ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ìƒì„±

- í”„ë¡œì íŠ¸ ì„ íƒ
  - Project: **Gradle - Groovy** Project
  - Language: Java
  - Spring Boot: 3.x.x
- Project Metadata
  - Group: hello
  - Artifact: servlet
  - Name: servlet
  - Package name: hello.servlet
  - Packaging: **War (ì£¼ì˜!)**
  - Java: 17 ë˜ëŠ” 21
- Dependencies: **Spring Web**, **Lombok**

![](/assets/images/2025/2025-02-21-07-32-13.png)

<br>

âš ï¸ PackagingëŠ” Jarê°€ ì•„ë‹ˆë¼ Warë¥¼ ì„ íƒí•´ì•¼í•œë‹¤. JSPë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•˜ë‹¤.

<br>

âš ï¸ ìŠ¤í”„ë§ ë¶€íŠ¸ 3.2 ë¶€í„° Build and run usingì— Gradle ì˜µì…˜ì„ ì„ íƒí•´ì•¼ í•œë‹¤. (default)

![](/assets/images/2025/2025-02-06-01-01-42.png)

<br>

í”„ë¡œì íŠ¸ ìƒì„± í›„, ì••ì¶•ì„ í’€ê³  `build.gradle`ì„ ì‹¤í–‰í•˜ì.

<br>

## 1.2 ë™ì‘ í™•ì¸

> ë™ì‘ í™•ì¸

- ê¸°ë³¸ ë©”ì¸ í´ë˜ìŠ¤ ì‹¤í–‰(`ServletApplication.main()`)
- [http://localhost:8080](http://localhost:8080) í˜¸ì¶œí•´ì„œ Whitelabel Error Pageê°€ ë‚˜ì˜¤ë©´ ì •ìƒ ë™ì‘

<br>

## 1.3 ë¡¬ë³µ ì ìš©

> ë¡¬ë³µ ì ìš© (window: File -> Setting)

â‘  Preferences plugin lombok ê²€ìƒ‰ ì‹¤í–‰ (ì¬ì‹œì‘)

![](/assets/images/2025/2025-02-21-07-45-07.png)

<br>

â‘¡ Preferences Annotation Processors ê²€ìƒ‰ Enable annotation processing ì²´í¬ (ì¬ì‹œì‘)

![](/assets/images/2025/2025-02-21-07-46-55.png)

<br>

â‘¢ ì„ì˜ì˜ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  @Getter, @Setter í™•ì¸

<br>

## 1.4 Postman ì„¤ì¹˜

[www.postman.com](https://www.postman.com/downloads/)ì—ì„œ Postmanì„ ë‹¤ìš´ë¡œë“œ ë°›ê³  ì„¤ì¹˜

<br><br>

# 2. Hello ì„œë¸”ë¦¿

> ìŠ¤í”„ë§ ë¶€íŠ¸ í™˜ê²½ì—ì„œ ì„œë¸”ë¦¿ ë“±ë¡í•˜ê³  ì‚¬ìš©í•´ë³´ì.

ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” í†°ìº£ ì„œë²„ë¥¼ ë‚´ì¥í•˜ê³  ìˆìœ¼ë¯€ë¡œ, í†°ìº£ ì„œë²„ ì„¤ì¹˜ ì—†ì´ í¸ë¦¬í•˜ê²Œ ì„œë¸”ë¦¿ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

<br>

## 2.1 ìŠ¤í”„ë§ ë¶€íŠ¸ ì„œë¸”ë¦¿ í™˜ê²½ êµ¬ì„±

> ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” ì„œë¸”ë¦¿ì„ ì§ì ‘ ë“±ë¡í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ `@ServletComponentScan` ì„ ì§€ì›í•œë‹¤.

ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•˜ì.

```java
package hello.servlet;

@ServletComponentScan // ì„œë¸”ë¦¿ ìë™ ë“±ë¡
@SpringBootApplication
public class ServletApplication {

	public static void main(String[] args) {
		SpringApplication.run(ServletApplication.class, args);
	}
}
```

<br>

## 2.2 ì„œë¸”ë¦¿ ë“±ë¡í•˜ê¸°

> ìƒì„±í•œ í”„ë¡œì íŠ¸ `hello.servlet` í•˜ìœ„ì— `basic`ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ì–´ `HelloServlet` í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‹¤ì œ ë™ì‘í•˜ëŠ” ì„œë¸”ë¦¿ ì½”ë“œë¥¼ ë“±ë¡í•´ë³´ì. (`hello.servlet.basic.HelloServlet`)

ì„œë¸”ë¦¿ì€ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ê³ , ë™ì  ì›¹ í˜ì´ì§€ë‚˜ ë‹¤ë¥¸ ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ìë°” í”„ë¡œê·¸ë¨ì´ë‹¤.

ì´ ì„œë¸”ë¦¿ì€ `/hello` URLë¡œ ë“¤ì–´ì˜¤ëŠ” HTTP ìš”ì²­ì„ ë°›ì•„ `service()` ë©”ì„œë“œë¥¼ í†µí•´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

<br>

ğŸ’¡ Override ë©”ì„œë“œ ìƒì„± ë‹¨ì¶•í‚¤: `Ctrl + O`ë¥¼ ëˆŒëŸ¬ ìë¬¼ì‡  ìˆëŠ” service ë©”ì„œë“œë¥¼ ì„ íƒ<br>
(ë‹¨ì¶•í‚¤ í™•ì¸: ì„¤ì • > Keymap > Override Methods )

![](/assets/images/2025/2025-02-21-08-10-31.png)

<br>

`req`ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ê°ì²´ì´ê³ , `resp`ëŠ” ê·¸ ìš”ì²­ì— ëŒ€í•œ ì„œë²„ì˜ ì‘ë‹µì„ ì‘ì„±í•´ì„œ ë³´ë‚´ëŠ” ê°ì²´ì´ê¸° ë•Œë¬¸ì— ì‘ë‹µ ë©”ì‹œì§€ëŠ” respë¡œ ë³´ë‚´ëŠ” ê²ƒì´ë‹¤.

```java
package hello.servlet.basic;

@WebServlet(name="helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("HelloServlet.service");
        System.out.println("req = " + req);
        System.out.println("resp = " + resp);

    }
}

```

- `@WebServlet` ì„œë¸”ë¦¿ ì• ë…¸í…Œì´ì…˜
  - name: ì„œë¸”ë¦¿ ì´ë¦„ (ì„œë¸”ë¦¿ ì´ë¦„ì€ ì•„ë¬´ê±°ë‚˜ ë¶€ì—¬í•´ë„ ë¨)
  - urlPatterns: URL ë§¤í•‘
- HTTP ìš”ì²­ì„ í†µí•´ ë§¤í•‘ëœ URLì´ í˜¸ì¶œë˜ë©´ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ìŒ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.
  - `protected void service(HttpServletRequest request, HttpServletResponse response)`

![](/assets/images/2025/2025-02-21-08-20-51.png)

<br>

ë¹ˆ í™”ë©´ì´ë©´ ì„±ê³µ!

![](/assets/images/2025/2025-02-21-08-13-36.png)

<br>

> `http://localhost:8080/hello?username=park`ì™€ ê°™ì´ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ì½ì„ ìˆ˜ ìˆë„ë¡ í•´ë³´ì!

ì„œë¸”ë¦¿ì€ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ í¸í•˜ê²Œ ì½ë„ë¡ ì§€ì›í•´ì¤€ë‹¤.

```java
package hello.servlet.basic;

import java.io.IOException;

@WebServlet(name="helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("HelloServlet.service");
        System.out.println("req = " + req);
        System.out.println("resp = " + resp);

        // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
        String username = req.getParameter("username");
        System.out.println("username = " + username);
    }
}
```

<br>

> ì´ë²ˆì—ëŠ” `HttpServletResponse`ë¥¼ í†µí•´ ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë³´ì.

```java
package hello.servlet.basic;


import java.io.IOException;

@WebServlet(name="helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println("HelloServlet.service");
        System.out.println("req = " + req);
        System.out.println("resp = " + resp);

        // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°
        String username = req.getParameter("username");
        System.out.println("username = " + username);

        // ì‘ë‹µ ë©”ì‹œì§€ ë³´ë‚´ê¸°
        resp.setContentType("text/plain");
        resp.setCharacterEncoding("utf-8");
        resp.getWriter().write("hello " + username);
    }
}
```

![](/assets/images/2025/2025-02-21-08-33-01.png)

<br>

## 2.3 HTTP ìš”ì²­ ë©”ì‹œì§€ ë¡œê·¸ë¡œ í™•ì¸í•˜ê¸°

> `main/resources/application.properties`ì— ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•˜ì.

```
logging.level.org.apache.coyote.http11=trace
```

<br>

> ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ê³ , ìš”ì²­í•´ë³´ë©´ ì„œë²„ê°€ ë°›ì€ HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

âš ï¸ ìš´ì˜ì„œë²„ì— ì´ë ‡ê²Œ ëª¨ë“  ìš”ì²­ ì •ë³´ë¥¼ ë‹¤ ë‚¨ê¸°ë©´ ì„±ëŠ¥ì €í•˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê°œë°œ ë‹¨ê³„ì—ì„œë§Œ ì ìš©í•˜ì.

![](/assets/images/2025/2025-02-21-08-38-50.png)

<br>

## 2.4 ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ë™ì‘ ë°©ì‹ ì„¤ëª…

â‘  ìŠ¤í”„ë§ ë¶€íŠ¸ ì‹¤í–‰ â†’ ë‚´ì¥ í†°ìº£ ì„œë²„ê°€ í•¨ê»˜ ì‹¤í–‰ë¨

â‘¡ í†°ìº£ ì„œë²„ ë‚´ë¶€ì˜ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì„œë¸”ë¦¿ì„ ìƒì„± ë° ê´€ë¦¬

![](/assets/images/2025/2025-02-21-08-40-01.png)

<br>

â‘¢ í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €)ê°€ `hello?username=world` ìš”ì²­ì„ ë³´ë‚´ë©´, ìš”ì²­ëœ HTTP ë©”ì‹œì§€ê°€ ì„œë²„ë¡œ ì „ë‹¬

![](/assets/images/2025/2025-02-21-08-45-26.png)

<br>

â‘£ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ `request`, `response` ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , `helloServlet`(ì‹±ê¸€í†¤) í˜¸ì¶œ ë° ìš”ì²­ ì „ë‹¬

â‘¤ ì„œë¸”ë¦¿ì´ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ìƒì„±í•œ í›„, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì‘ë‹µì„ í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €)ì—ê²Œ ë°˜í™˜

![](/assets/images/2025/2025-02-21-08-45-44.png)

<br>

ğŸ’¡ HTTP ì‘ë‹µì—ì„œ Content-LengthëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤.

<br>

## 2.5 welcome í˜ì´ì§€ ì¶”ê°€

- `main`ì— Directoryë¡œ `webapp`ì„ ìƒì„±í•œ ë’¤, Fileë¡œ `index.html`, `basic.html` ìƒì„±
- `! + Tab`: ì—ë°‹ ê¸°ëŠ¥ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ html ë¬¸ì„œ êµ¬ì¡° ìë™ ìƒì„±

<br>

ê·¸ëƒ¥ ì•„ë˜ ì½”ë“œ ë³µë¶™í•˜ì (í”„ë¡ íŠ¸ë¥¼ ê³µë¶€í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê¸° ë•Œë¬¸)

> `main/webapp/index.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <ul>
      <li><a href="basic.html">ì„œë¸”ë¦¿ basic</a></li>
    </ul>
  </body>
</html>
```

<br>

> `main/webapp/basic.html`

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <ul>
      <li>
        hello ì„œë¸”ë¦¿
        <ul>
          <li><a href="/hello?username=servlet">hello ì„œë¸”ë¦¿ í˜¸ì¶œ</a></li>
        </ul>
      </li>
      <li>
        HttpServletRequest
        <ul>
          <li><a href="/request-header">ê¸°ë³¸ ì‚¬ìš©ë²•, Header ì¡°íšŒ</a></li>
          <li>
            HTTP ìš”ì²­ ë©”ì‹œì§€ ë°”ë”” ì¡°íšŒ
            <ul>
              <li>
                <a href="/request-param?username=hello&age=20"
                  >GET - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°</a
                >
              </li>
              <li><a href="/basic/hello-form.html">POST - HTML Form</a></li>
              <li>HTTP API - MessageBody -> Postman í…ŒìŠ¤íŠ¸</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        HttpServletResponse
        <ul>
          <li><a href="/response-header">ê¸°ë³¸ ì‚¬ìš©ë²•, Header ì¡°íšŒ</a></li>
          <li>
            HTTP ì‘ë‹µ ë©”ì‹œì§€ ë°”ë”” ì¡°íšŒ
            <ul>
              <li><a href="/response-html">HTML ì‘ë‹µ</a></li>
              <li><a href="/response-json">HTTP API JSON ì‘ë‹µ</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </body>
</html>
```

<br>

> ì´ì œë¶€í„° ê³µë¶€í•  ë‚´ìš©ë“¤ì´ ëª©ë¡í™” ë˜ì–´ ë Œë”ë§ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](/assets/images/2025/2025-02-21-08-58-36.png)

<br><br>

# 3. HttpServletRequest

## 3.1 ê°œìš”

> HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ ê°œë°œìê°€ ì§ì ‘ íŒŒì‹±í•´ì„œ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, ë§¤ìš° ë¶ˆí¸í•˜ë‹¤.

ì„œë¸”ë¦¿ì€ ê°œë°œìê°€ HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê°œë°œì ëŒ€ì‹ ì— HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ íŒŒì‹±í•œë‹¤. ê·¸ë¦¬ê³  ê·¸ ê²°ê³¼ë¥¼ `HttpServletRequest` ê°ì²´ì— ë‹´ì•„ì„œ ì œê³µí•œë‹¤.

<br>

> HttpServletRequestë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

```java
// HTTP ìš”ì²­ ë©”ì‹œì§€
/*  START LINE */
POST /save HTTP/1.1

/* í—¤ë”  */
Host: localhost:8080
Content-Type: application/x-www-form-urlencoded

/* ë°”ë”” */
username=kim&age=20
```

- START LINE
  - HTTP ë©”ì†Œë“œ
  - URL
  - ì¿¼ë¦¬ ìŠ¤íŠ¸ë§
  - ìŠ¤í‚¤ë§ˆ, í”„ë¡œí† ì½œ
- í—¤ë”
  - í—¤ë” ì¡°íšŒ
- ë°”ë””
  - form íŒŒë¼ë¯¸í„° í˜•ì‹ ì¡°íšŒ
  - message body ë°ì´í„° ì§ì ‘ ì¡°íšŒ

<br>

> HttpServletRequest ê°ì²´ëŠ” ì¶”ê°€ë¡œ ì—¬ëŸ¬ê°€ì§€ ë¶€ê°€ê¸°ëŠ¥ë„ í•¨ê»˜ ì œê³µí•œë‹¤.

â‘  ì„ì‹œ ì €ì¥ì†Œ ê¸°ëŠ¥

- í•´ë‹¹ HTTP ìš”ì²­ì´ ì‹œì‘ë¶€í„° ëë‚  ë•Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ì„ì‹œ ì €ì¥ì†Œ ê¸°ëŠ¥
  - ì €ì¥: `request.setAttribute(name, value)`
  - ì¡°íšŒ: `request.getAttribute(name)`

<br>

â‘¡ ì„¸ì…˜ ê´€ë¦¬ ê¸°ëŠ¥

`request.getSession(create: true)`

<br>

> ì¤‘ìš”â­ (ì˜í•œ ê°•ì‚¬ë‹˜ì˜ ë§ì”€ ğŸ‘¨â€ğŸ«ğŸ’¬)

HttpServletRequest, HttpServletResponseë¥¼ ì‚¬ìš©í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ì ì€ ì´ ê°ì²´ë“¤ì´ HTTP ìš”ì²­ ë©”ì‹œì§€, HTTP ì‘ë‹µ ë©”ì‹œì§€ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ê°ì²´ë¼ëŠ” ì ì´ë‹¤.

ë”°ë¼ì„œ ì´ ê¸°ëŠ¥ì— ëŒ€í•´ì„œ ê¹Šì´ìˆëŠ” ì´í•´ë¥¼í•˜ë ¤ë©´ HTTP ìŠ¤í™ì´ ì œê³µí•˜ëŠ” ìš”ì²­, ì‘ë‹µ ë©”ì‹œì§€ ìì²´ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤.

ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê¹Šì´ ìˆê²Œ ì´í•´í•˜ê¸° ìœ„í•´ HTTPì— ëŒ€í•´ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

<br>

## 3.2 ê¸°ë³¸ ì‚¬ìš©ë²•

> `hello/servlet/basic`ì— `request`ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ë§Œë“  í›„. `RequestHeaderServlet` í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì.

ğŸ’¡ Override ë©”ì„œë“œ ìƒì„± ë‹¨ì¶•í‚¤: `Ctrl + O`ë¥¼ ëˆŒëŸ¬ ìë¬¼ì‡  ìˆëŠ” service ë©”ì„œë“œë¥¼ ì„ íƒ<br>
(ë‹¨ì¶•í‚¤ í™•ì¸: ì„¤ì • > Keymap > Override Methods )

### 3.2.1 start line ì •ë³´ ì¶œë ¥

```java
package hello.servlet.basic.request;

// http://localhost:8080/request-header?username=hello
@WebServlet(name = "requestHeaderServlet", urlPatterns = "/request-header")
public class RequestHeaderServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        printStartLine(request);
    }

    // Start line ì •ë³´ ì¶œë ¥
    private void printStartLine(HttpServletRequest request) {
        System.out.println("--- REQUEST-LINE - start ---");

        System.out.println("request.getMethod() = " + request.getMethod()); // GET
        System.out.println("request.getProtocol() = " + request.getProtocol()); // HTTP/1.1
        System.out.println("request.getScheme() = " + request.getScheme()); // http
        System.out.println("request.getRequestURL() = " + request.getRequestURL()); // http://localhost:8080/request-header
        System.out.println("request.getRequestURI() = " + request.getRequestURI()); // /request-header
        System.out.println("request.getQueryString() = " + request.getQueryString()); // username=hello
        System.out.println("request.isSecure() = " + request.isSecure()); // HTTPS ì‚¬ìš© ì—¬ë¶€

        System.out.println("--- REQUEST-LINE - end ---");
        System.out.println();
    }
}
```

![](/assets/images/2025/2025-02-21-13-20-17.png)

<br>

### 3.2.2 Header ì •ë³´ ì¶œë ¥

> ëª¨ë“  Header ì •ë³´ë¥¼ ì¶œë ¥í•´ë³´ì

```java
package hello.servlet.basic.request;


import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

// http://localhost:8080/request-header?username=hello
@WebServlet(name = "requestHeaderServlet", urlPatterns = "/request-header")
public class RequestHeaderServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        printStartLine(request);
        printHeaders(request); // ì¶”ê°€
    }

    // Start line ì •ë³´ ì¶œë ¥
    private void printStartLine(HttpServletRequest request) {
    }

    // Header ëª¨ë“  ì •ë³´ ì¶œë ¥
    private void printHeaders(HttpServletRequest request) {
        System.out.println("--- Headers - start ---");

        /* ì˜›ë‚  ìŠ¤íƒ€ì¼
         Enumeration<String> headerNames = request.getHeaderNames();
         while (headerNames.hasMoreElements()) {
         String headerName = headerNames.nextElement();
         System.out.println(headerName + ": " + request.getHeader(headerName));
         }
        */

        request.getHeaderNames().asIterator()
                .forEachRemaining(headerName -> System.out.println(headerName + ": " + request.getHeader(headerName)));
        System.out.println("--- Headers - end ---");
        System.out.println();
    }
}
```

![](/assets/images/2025/2025-02-21-13-26-56.png)

`HttpServletRequest`ì—ëŠ” ë³„ë„ë¡œ `getHeaderValue` ê°™ì€ ë©”ì„œë“œê°€ ì—†ê³ , ëŒ€ì‹  `getHeader(String name)` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • í—¤ë”ì˜ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ë‹¤.

<br>

> ğŸ¤š ë¬¸ë²• ì§šê³  ë„˜ì–´ê°€ê¸°!

1. `request.getHeaderNames()`ë¡œ ëª¨ë“  í—¤ë” ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.
2. `asIterator()`ë¥¼ ì‚¬ìš©í•´ ì´ í—¤ë”ë“¤ì„ ìˆœíšŒí•  ìˆ˜ ìˆëŠ” Iterator(ìˆœíšŒ ë„êµ¬)ë¡œ ë³€í™˜í•œë‹¤.
3. `forEachRemaining`ëŠ” Iteratorì— ë‚¨ì•„ìˆëŠ” ëª¨ë“  ìš”ì†Œì— ëŒ€í•´ ì§€ì •ëœ ë™ì‘(ì—¬ê¸°ì„œëŠ” ëŒë‹¤ í‘œí˜„ì‹)ì„ ì‹¤í–‰í•œë‹¤.
   - `headerName`ëŠ” ëŒë‹¤ í‘œí˜„ì‹ì—ì„œ ì‚¬ìš©ìê°€ ì§€ì •í•œ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ìœ¼ë¡œ, Iteratorê°€ ë°˜í™˜í•˜ëŠ” ê° í—¤ë” ì´ë¦„ì„ ë‹´ê¸° ìœ„í•´ ì‚¬ìš©
4. ëŒë‹¤ í‘œí˜„ì‹ì€ ê° í—¤ë” ì´ë¦„ì„ ë°›ì•„ "í—¤ë” ì´ë¦„: í—¤ë” ê°’" í˜•íƒœë¡œ ì¶œë ¥í•œë‹¤.
   - e.g., HTTP ìš”ì²­ì— `Content-Type`ì´ë¼ëŠ” í—¤ë”ê°€ ìˆê³  ê°’ì´ `text/html`ì´ë©´, ì¶œë ¥ì€ `Content-Type: text/html`ì²˜ëŸ¼ ë‚˜íƒ€ë‚œë‹¤.

<br>

### 3.2.3 Header í¸ë¦¬í•œ ì¡°íšŒ

```java
// Header í¸ë¦¬í•œ ì¡°íšŒ
private void printHeaderUtils(HttpServletRequest request) {
    System.out.println("--- Header í¸ì˜ ì¡°íšŒ start ---");

    // Host ì •ë³´ ì¡°íšŒ
    System.out.println("[Host í¸ì˜ ì¡°íšŒ]");
    System.out.println("request.getServerName() = " + request.getServerName()); // Host í—¤ë”
    System.out.println("request.getServerPort() = " + request.getServerPort()); // Host í—¤ë”
    System.out.println();

    // Accept-Language ì¡°íšŒ
    System.out.println("[Accept-Language í¸ì˜ ì¡°íšŒ]");
    request.getLocales().asIterator()
            .forEachRemaining(locale -> System.out.println("locale = " + locale));
    System.out.println("request.getLocale() = " + request.getLocale());
    System.out.println();

    // Cookie ì¡°íšŒ
    System.out.println("[Cookie í¸ì˜ ì¡°íšŒ]");
    // getCookies()ëŠ” ì¿ í‚¤ê°€ ì—†ìœ¼ë©´ nullì„ ë°˜í™˜
    if (request.getCookies() != null) {
        // í–¥ìƒëœ forans: ë°°ì—´ request.getCookies()ì˜ ê° ìš”ì†Œë¥¼ cookie ë³€ìˆ˜ì— í•˜ë‚˜ì”© ë‹´ì•„ì„œ ì‚¬ìš©
        for (Cookie cookie : request.getCookies()) {
            System.out.println(cookie.getName() + ": " + cookie.getValue());
        }
    }
    System.out.println();

    // Content ì •ë³´ ì¡°íšŒ
    System.out.println("[Content í¸ì˜ ì¡°íšŒ]");
    System.out.println("request.getContentType() = " + request.getContentType());
    System.out.println("request.getContentLength() = " + request.getContentLength());
    System.out.println("request.getCharacterEncoding() = " + request.getCharacterEncoding());

    System.out.println("--- Header í¸ì˜ ì¡°íšŒ end ---");
    System.out.println();
}
```

![](/assets/images/2025/2025-02-21-13-35-22.png)

<br>

> ì•„ë˜ì™€ ê°™ì´ Post manì„ í†µí•´ ë°ì´í„°ë¥¼ ë³´ë‚´ë©´ ì •ìƒì ìœ¼ë¡œ Header Post ìš”ì²­ì´ ì²˜ë¦¬ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

GET -> `http://localhost:8080/request-header`

![](/assets/images/2025/2025-02-21-13-43-51.png)

![](/assets/images/2025/2025-02-21-13-43-10.png)

<br>

### 3.2.4 ê¸°íƒ€ ì •ë³´ ì¡°íšŒ

> ê¸°íƒ€ ì •ë³´ëŠ” HTTP ë©”ì‹œì§€ì˜ ì •ë³´ëŠ” ì•„ë‹ˆë‹¤

```java
// ê¸°íƒ€ ì •ë³´ ì¡°íšŒ
private void printEtc(HttpServletRequest request) {
    System.out.println("--- ê¸°íƒ€ ì¡°íšŒ start ---");

    // Remote ì •ë³´ ì¡°íšŒ
    System.out.println("[Remote ì •ë³´]");
    System.out.println("request.getRemoteHost() = " + request.getRemoteHost()); // í´ë¼ì´ì–¸íŠ¸ í˜¸ìŠ¤íŠ¸ëª…
    System.out.println("request.getRemoteAddr() = " + request.getRemoteAddr()); // í´ë¼ì´ì–¸íŠ¸ IP ì£¼ì†Œ
    System.out.println("request.getRemotePort() = " + request.getRemotePort()); // í´ë¼ì´ì–¸íŠ¸ í¬íŠ¸ ë²ˆí˜¸
    System.out.println();

    // Local ì •ë³´ ì¡°íšŒ
    System.out.println("[Local ì •ë³´]");
    System.out.println("request.getLocalName() = " + request.getLocalName()); // ì„œë²„ í˜¸ìŠ¤íŠ¸ëª…
    System.out.println("request.getLocalAddr() = " + request.getLocalAddr()); // ì„œë²„ IP ì£¼ì†Œ
    System.out.println("request.getLocalPort() = " + request.getLocalPort()); // ì„œë²„ í¬íŠ¸ ë²ˆí˜¸

    System.out.println("--- ê¸°íƒ€ ì¡°íšŒ end ---");
    System.out.println();
}
```

![](/assets/images/2025/2025-02-21-13-47-11.png)

<br><br>

# 4. HTTP ìš”ì²­ ë°ì´í„°

ì§€ê¸ˆê¹Œì§€ HttpServletRequestë¥¼ í†µí•´ì„œ HTTP ë©”ì‹œì§€ì˜ start-line, header ì •ë³´ ì¡°íšŒ ë°©ë²•ì„ ì´í•´í–ˆë‹¤.

ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ HTTP ìš”ì²­ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì¡°íšŒí•˜ëŠ”ì§€ ì•Œì•„ë³´ì.

 <br>

## 4.1 ê°œìš”

> HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì.

ì£¼ë¡œ ë‹¤ìŒ 3ê°€ì§€ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.

<br>

> â‘  GET - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°

- `/url?username=hello&age=20`
- ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ì „ë‹¬
- e.g., ê²€ìƒ‰, í•„í„°, í˜ì´ì§•ë“±ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹

<br>

> â‘¡ POST - HTML Form

- content-type: `application/x-www-form-urlencoded`
- ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¦¬ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ `username=hello&age=20`
- e.g., íšŒì› ê°€ì…, ìƒí’ˆ ì£¼ë¬¸, HTML Form ì‚¬ìš©

![](/assets/images/2025/2025-02-21-13-52-57.png)

<br>

> â‘¢ HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­

- HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, JSON, XML, TEXT
- ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš©
- POST, PUT, PATCH

<br>

## 4.2 GET ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°

> ì•„ë˜ ë°ì´í„°ë¥¼ ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ **ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**ë¥¼ ì‚¬ìš©í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ì „ì†¡í•´ë³´ì.

- ì „ë‹¬ ë°ì´í„°
  - `username=hello`
  - `age=20`

<br>

> ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ëŠ” URLì— ë‹¤ìŒê³¼ ê°™ì´ `?` ë¥¼ ì‹œì‘ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. ì¶”ê°€ íŒŒë¼ë¯¸í„°ëŠ” `&` ë¡œ êµ¬ë¶„í•˜ë©´ ëœë‹¤.

`http://localhost:8080/request-param?username=hello&age=20`

<br>

`hello.servlet.basic.request`ì— `RequestParamServlet`ì„ ìƒì„±í•˜ì

```java
package hello.servlet.basic.request;


import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;

/**
 * 1. íŒŒë¼ë¯¸í„° ì „ì†¡ ê¸°ëŠ¥
 *    ì˜ˆ) http://localhost:8080/request-param?username=hello&age=20
 *
 * 2. ë™ì¼í•œ íŒŒë¼ë¯¸í„° ì „ì†¡ ê°€ëŠ¥
 *    ì˜ˆ) http://localhost:8080/request-param?username=hello&username=kim&age=20
 */
@WebServlet(name = "requestParamServlet", urlPatterns = "/request-param")
public class RequestParamServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        System.out.println("[ì „ì²´ íŒŒë¼ë¯¸í„° ì¡°íšŒ] - start");

        // ëª¨ë“  ìš”ì²­ íŒŒë¼ë¯¸í„° ì¶œë ¥
        request.getParameterNames().asIterator()
                .forEachRemaining(paramName ->
                        System.out.println(paramName + " = " + request.getParameter(paramName))
                );

        System.out.println("[ì „ì²´ íŒŒë¼ë¯¸í„° ì¡°íšŒ] - end");
        System.out.println();

        // ë‹¨ì¼ íŒŒë¼ë¯¸í„° ì¡°íšŒ
        System.out.println("[ë‹¨ì¼ íŒŒë¼ë¯¸í„° ì¡°íšŒ]");
        String username = request.getParameter("username");
        System.out.println("request.getParameter(\"username\") = " + username);
        String age = request.getParameter("age");
        System.out.println("request.getParameter(\"age\") = " + age);
        System.out.println();

        // ë™ì¼í•œ ì´ë¦„ì„ ê°€ì§„ ë³µìˆ˜ íŒŒë¼ë¯¸í„° ì¡°íšŒ
        System.out.println("[ì´ë¦„ì´ ê°™ì€ ë³µìˆ˜ íŒŒë¼ë¯¸í„° ì¡°íšŒ]");
        System.out.println("request.getParameterValues(\"username\")");

        String[] usernames = request.getParameterValues("username");
        if (usernames != null) {
            for (String name : usernames) {
                System.out.println("username = " + name);
            }
        }

        response.getWriter().write("ok");
    }
}
```

> ì‹¤í–‰ - íŒŒë¼ë¯¸í„° ì „ì†¡

[http://localhost:8080/request-param?username=hello&age=20](http://localhost:8080/request-param?username=hello&age=20)

![](/assets/images/2025/2025-02-21-14-16-20.png)

<br>

> ì‹¤í–‰ - ë™ì¼ íŒŒë¼ë¯¸í„° ì „ì†¡

ì´ë ‡ê²Œ ì˜ ì‚¬ìš©í•˜ì§€ì•ŠìŒ

[http://localhost:8080/request-param?username=hello&username=kim&age=20](http://localhost:8080/request-param?username=hello&username=kim&age=20)

![](/assets/images/2025/2025-02-21-14-28-48.png)

<br>

> ë³µìˆ˜ íŒŒë¼ë¯¸í„°ì—ì„œ ë‹¨ì¼ íŒŒë¼ë¯¸í„° ì¡°íšŒ

```
`username=hello&username=kim` ê³¼ ê°™ì´ íŒŒë¼ë¯¸í„° ì´ë¦„ì€ í•˜ë‚˜ì¸ë°, ê°’ì´ ì¤‘ë³µì´ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
```

- request.getParameter() ëŠ” í•˜ë‚˜ì˜ íŒŒë¼ë¯¸í„° ì´ë¦„ì— ëŒ€í•´ì„œ ë‹¨ í•˜ë‚˜ì˜ ê°’ë§Œ ìˆì„ ë•Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì§€ê¸ˆì²˜ëŸ¼ ì¤‘ë³µì¼ ë•ŒëŠ” `request.getParameterValues()` ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ì°¸ê³ ë¡œ ì´ë ‡ê²Œ ì¤‘ë³µì¼ ë•Œ `request.getParameter()` ë¥¼ ì‚¬ìš©í•˜ë©´ `request.getParameterValues()` ì˜ ì²«ë²ˆì§¸ ê°’ì„ ë°˜í™˜í•œë‹¤.

<br>

## 4.3 POST HTML Form

> ì´ë²ˆì—ëŠ” HTMLì˜ Formì„ ì‚¬ìš©í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•´ë³´ì.

ì£¼ë¡œ íšŒì› ê°€ì…, ìƒí’ˆ ì£¼ë¬¸ ë“±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

<br>

> íŠ¹ì§•

- content-type: `application/x-www-form-urlencoded`
- ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¦¬ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤. `username=hello&age=20`

<br>

> `src/main/webapp/basic/hello-form.html` ìƒì„±

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <form action="/request-param" method="post">
      username: <input type="text" name="username" /> age:
      <input type="text" name="age" />
      <button type="submit">ì „ì†¡</button>
    </form>
  </body>
</html>
```

[http://localhost:8080/basic/hello-form.html](http://localhost:8080/basic/hello-form.html) ì‹¤í–‰í•´ë³´ì (ì„œë²„ ì¬ì‹œì‘)

<br>

> POSTì˜ HTML Formì„ ì „ì†¡í•˜ë©´ ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ HTTP ë©”ì‹œì§€ë¥¼ ë§Œë“ ë‹¤. (ì›¹ ë¸Œë¼ìš°ì € ê°œë°œì ëª¨ë“œ í™•ì¸)

- ìš”ì²­ URL: [http://localhost:8080/request-param](http://localhost:8080/request-param)
- content-type: `application/x-www-form-urlencoded`
- message body: `username=hello&age=20`

<br>

> Â·application/x-www-form-urlencodedÂ· í˜•ì‹ì€ ì•ì„œ GETì—ì„œ ì‚´í´ë³¸ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ê³¼ ê°™ë‹¤. ë”°ë¼ì„œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¡°íšŒ ë©”ì„œë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

- í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €) ì…ì¥ì—ì„œëŠ” ë‘ ë°©ì‹ì— ì°¨ì´ê°€ ìˆì§€ë§Œ, ì„œë²„ ì…ì¥ì—ì„œëŠ” ë‘˜ì˜ í˜•ì‹ì´ ë™ì¼í•˜ë¯€ë¡œ, `request.getParameter()` ë¡œ í¸ë¦¬í•˜ê²Œ êµ¬ë¶„ì—†ì´ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- ì •ë¦¬í•˜ë©´ `request.getParameter()` ëŠ” GET URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ë„ ì§€ì›í•˜ê³ , POST HTML Form í˜•ì‹ë„ ë‘˜ ë‹¤ ì§€ì›í•œë‹¤.

<br>

> ì°¸ê³ 

- content-typeì€ HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë°ì´í„° í˜•ì‹ì„ ì§€ì •í•œë‹¤.
  - **GET URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹**ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•ŒëŠ” HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— content-typeì´ ì—†ë‹¤.
  - **POST HTML Form í˜•ì‹**ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ë©´ HTTP ë©”ì‹œì§€ ë°”ë””ì— í•´ë‹¹ ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ë³´ë‚´ê¸° ë•Œë¬¸ì— ë°”ë””ì— í¬í•¨ëœ ë°ì´í„°ê°€ ì–´ë–¤ í˜•ì‹ì¸ì§€ content-typeì„ ê¼­ ì§€ì •í•´ì•¼ í•œë‹¤.
- ì´ë ‡ê²Œ í¼ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” í˜•ì‹ì„ `application/x-www-form-urlencoded` ë¼ í•œë‹¤.

<br>

### 4.3.1 Postmanì„ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸

> ì´ëŸ° ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ì— HTML formì„ ë§Œë“¤ê¸°ëŠ” ê·€ì°®ë‹¤. ì´ë•ŒëŠ” Postmanì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

- POST ì „ì†¡ì‹œ
  - Body -> `x-www-form-urlencoded` ì„ íƒ
  - Headersì—ì„œ `content-type: application/x-www-form-urlencoded` ë¡œ ì§€ì •ëœ ë¶€ë¶„ ê¼­ í™•ì¸

![](/assets/images/2025/2025-02-21-14-53-52.png)

<br>

## 4.4 API ë©”ì‹œì§€ ë°”ë”” - ë‹¨ìˆœ í…ìŠ¤íŠ¸

> HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­

- HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, JSON, XML, TEXT
- ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš©
- POST, PUT, PATCH

<br>

> ë¨¼ì € ê°€ì¥ ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ HTTP ë©”ì‹œì§€ ë°”ë””ì— ë‹´ì•„ì„œ ì „ì†¡í•˜ê³ , ì½ì–´ë³´ì.

HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë°ì´í„°ë¥¼ InputStreamì„ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì½ì„ ìˆ˜ ìˆë‹¤.

<br>

`hello.servlet.basic.request`ì— `RequestBodyStringServlet` ìƒì„±

```java
package hello.servlet.basic.request;

import jakarta.servlet.ServletException;
import jakarta.servlet.ServletInputStream;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.util.StreamUtils;


import java.io.IOException;
import java.nio.charset.StandardCharsets;

/**
 * HTTP ìš”ì²­ ë°”ë””ì—ì„œ ë¬¸ìì—´ ë°ì´í„°ë¥¼ ì½ëŠ” ì„œë¸”ë¦¿
 */
@WebServlet(name = "requestBodyStringServlet", urlPatterns = "/request-body-string")
public class RequestBodyStringServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // ìš”ì²­ ë°”ë””ì—ì„œ ë°ì´í„° ì½ê¸°
        // HTTP ìš”ì²­ ë°”ë””ì˜ ë‚´ìš©ì„ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼(ServletInputStream)ìœ¼ë¡œ ë³€í™˜
        ServletInputStream inputStream = request.getInputStream();

        // ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ë°ì´í„°ë¥¼ UTF-8 ë¬¸ìì—´ë¡œ ë³€í™˜ (Springì˜ StreamUtils ì‚¬ìš©)
        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);

        // ì½˜ì†” ì¶œë ¥
        System.out.println("messageBody = " + messageBody);

        // ì‘ë‹µ ë°˜í™˜
        response.getWriter().write("ok");
    }
}
```

<br>

> ì°¸ê³ 

inputStreamì€ byte ì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤.

byte ì½”ë“œë¥¼ ìš°ë¦¬ê°€ ì½ì„ ìˆ˜ ìˆëŠ” ë¬¸ì(String)ë¡œ ë³´ë ¤ë©´ ë¬¸ìí‘œ(Charset)ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. ì—¬ê¸°ì„œëŠ” UTF_8 Charsetì„ ì§€ì •í•´ì£¼ì—ˆë‹¤.

<br>

> Postmanì„ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸

- ë¬¸ì ì „ì†¡
  - POST -> `http://localhost:8080/request-body-string`
  - content-type: `text/plain`
  - message body: `hello`
  - ê²°ê³¼: `messageBody = hello`

![](/assets/images/2025/2025-02-21-15-19-31.png)

<br>

## 4.5 API ë©”ì‹œì§€ ë°”ë”” - JSON

> ì´ë²ˆì—ëŠ” HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ë³´ì.

- JSON í˜•ì‹ ì „ì†¡
  - POST -> `http://localhost:8080/request-body-json`
  - content-type: `application/json`
  - message body: `{"username": "hello", "age": 20}`
  - ê²°ê³¼: `messageBody = {"username": "hello", "age": 20}`

<br>

> JSON í˜•ì‹ íŒŒì‹± ì¶”ê°€

JSON í˜•ì‹ìœ¼ë¡œ íŒŒì‹±í•  ìˆ˜ ìˆê²Œ ê°ì²´ë¥¼ í•˜ë‚˜ ìƒì„±í•˜ì (ë³´í†µ JSON í˜•ì‹ì„ ê°ì²´ë¡œ ë°”ê¿”ì„œ ì‚¬ìš©)

`hello.servlet.basic.HelloData`

```java
package hello.servlet.basic;

import lombok.Getter;
import lombok.Setter;

@Getter @Setter
public class HelloData {
    private String username;
    private int age;
}
```

<br>

`hello.servlet.basic.request`ì— `RequestBodyJsonServlet` ì¶”ê°€

```java
package hello.servlet.basic.request;

/**
 * JSON ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¸”ë¦¿
 *
 * ìš”ì²­ ì˜ˆì‹œ:
 * - URL: http://localhost:8080/request-body-json
 * - Content-Type: application/json
 * - Body: {"username": "hello", "age": 20}
 */
@WebServlet(name = "requestBodyJsonServlet", urlPatterns = "/request-body-json")
public class RequestBodyJsonServlet extends HttpServlet {

    // JSON ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ObjectMapper (Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
    private final ObjectMapper objectMapper = new ObjectMapper();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // ìš”ì²­ ë°”ë””(InputStream) ì½ê¸°
        ServletInputStream inputStream = request.getInputStream();
        String messageBody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);

        System.out.println("messageBody = " + messageBody);

        // JSON ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜
        HelloData helloData = objectMapper.readValue(messageBody, HelloData.class);

        System.out.println("helloData.username = " + helloData.getUsername());
        System.out.println("helloData.age = " + helloData.getAge());

        // ì‘ë‹µ ë°˜í™˜
        response.getWriter().write("ok");
    }
}
```

<br>

> ì°¸ê³  (1)

- JSON ê²°ê³¼ë¥¼ íŒŒì‹±í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìë°” ê°ì²´ë¡œ ë³€í™˜í•˜ë ¤ë©´ Jackson, Gson ê°™ì€ JSON ë³€í™˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ Spring MVCë¥¼ ì„ íƒí•˜ë©´ ê¸°ë³¸ìœ¼ë¡œ Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ ( ObjectMapper )ë¥¼ í•¨ê»˜ ì œê³µí•œë‹¤.

> ì°¸ê³  (2)

- HTML form ë°ì´í„°ë„ ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ì „ì†¡ë˜ë¯€ë¡œ ì§ì ‘ ì½ì„ ìˆ˜ ìˆë‹¤.
- í•˜ì§€ë§Œ í¸ë¦¬í•œ íŒŒë¦¬ë¯¸í„° ì¡°íšŒ ê¸°ëŠ¥( request.getParameter(...) )ì„ ì´ë¯¸ ì œê³µí•˜ê¸° ë•Œë¬¸ì— íŒŒë¼ë¯¸í„° ì¡°íšŒ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

<br>

> Postmanìœ¼ë¡œ ì‹¤í–‰í•´ë³´ì.

- POST -> `http://localhost:8080/request-body-json`
- content-type: `application/json` (Body raw, ê°€ì¥ ì˜¤ë¥¸ìª½ì—ì„œ JSON ì„ íƒ)
- message body: `{"username": "hello", "age": 20}`

![](/assets/images/2025/2025-02-21-15-27-26.png)

<br><br>

# 5. HttpServletResponse

## 5.1 HttpServletResponse ì—­í• 

> HTTP ì‘ë‹µ ë©”ì‹œì§€ ìƒì„±

- HTTP ì‘ë‹µì½”ë“œ ì§€ì •
- í—¤ë” ìƒì„±
- ë°”ë”” ìƒì„±

> í¸ì˜ ê¸°ëŠ¥ ì œê³µ

Content-Type, ì¿ í‚¤, Redirect

<br>

## 5.2 HttpServletResponse - ê¸°ë³¸ ì‚¬ìš©ë²•

`hello.servlet.basic.response.ResponseHeaderServlet`

```java
package hello.servlet.basic.response;

/**
 * HTTP ì‘ë‹µ í—¤ë” ì„¤ì • ì„œë¸”ë¦¿
 *
 * ìš”ì²­ ì˜ˆì‹œ:
 * - URL: http://localhost:8080/response-header
 */
@WebServlet(name = "responseHeaderServlet", urlPatterns = "/response-header")
public class ResponseHeaderServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // [Status-Line] - HTTP ì‘ë‹µ ìƒíƒœ ì½”ë“œ ì„¤ì • (200 OK)
        response.setStatus(HttpServletResponse.SC_OK);

        // [Response Headers] - ì‘ë‹µ í—¤ë” ì„¤ì •
        response.setHeader("Content-Type", "text/plain;charset=utf-8");
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Pragma", "no-cache");
        response.setHeader("my-header", "hello");

        // [Header í¸ì˜ ë©”ì„œë“œ]
        content(response);
        cookie(response);
        redirect(response);

        // [Message Body] - ì‘ë‹µ ë³¸ë¬¸ ì¶œë ¥
        PrintWriter writer = response.getWriter();
        writer.println("ok");
    }

    /**
     * Content í¸ì˜ ë©”ì„œë“œ
     */
    private void content(HttpServletResponse response) {
        //Content-Type: text/plain;charset=utf-8
        //Content-Length: 2
        //response.setHeader("Content-Type", "text/plain;charset=utf-8");
        response.setContentType("text/plain");
        response.setCharacterEncoding("utf-8");
        //response.setContentLength(2); //(ìƒëµì‹œ ìë™ ìƒì„±)
    }
s
    /**
     * ì¿ í‚¤ í¸ì˜ ë©”ì„œë“œ
     */
    private void cookie(HttpServletResponse response) {
        // Set-Cookie: myCookie=good; Max-Age=600;
        // response.setHeader("Set-Cookie", "myCookie=good; Max-Age=600");
        Cookie cookie = new Cookie("myCookie", "good");
        cookie.setMaxAge(600); // 600ì´ˆ (10ë¶„)
        response.addCookie(cookie);
    }

    /**
     * redirect í¸ì˜ ë©”ì„œë“œ
     */
    private void redirect(HttpServletResponse response) throws IOException {
        // Status Code 302
        // Location: /basic/hello-form.html

        // response.setStatus(HttpServletResponse.SC_FOUND); // 302
        // response.setHeader("Location", "/basic/hello-form.html");
        response.sendRedirect("/basic/hello-form.html");
    }
}
```

![](/assets/images/2025/2025-02-21-15-43-40.png)

<br><br>

# 6. HTTP ì‘ë‹µ ë°ì´í„°

## 6.1 ë‹¨ìˆœ í…ìŠ¤íŠ¸, HTML

> HTTP ì‘ë‹µ ë©”ì‹œì§€ëŠ” ì£¼ë¡œ ë‹¤ìŒ ë‚´ìš©ì„ ë‹´ì•„ì„œ ì „ë‹¬í•œë‹¤.

- ë‹¨ìˆœ í…ìŠ¤íŠ¸ ì‘ë‹µ
  - ì•ì—ì„œ ì‚´í´ë´„ ( `writer.println("ok");` )
- HTML ì‘ë‹µ
- HTTP API - MessageBody JSON ì‘ë‹µ

<br>

### 6.1.1 HttpServletResponse - HTML ì‘ë‹µ

`hello.servlet.web.response.ResponseHtmlServlet`

```java
package hello.servlet.basic.response;

/**
 * HTML ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì„œë¸”ë¦¿
 *
 * ìš”ì²­ ì˜ˆì‹œ:
 * - URL: http://localhost:8080/response-html
 */
@WebServlet(name = "responseHtmlServlet", urlPatterns = "/response-html")
public class ResponseHtmlServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // Content-Type ì„¤ì •: HTML ë¬¸ì„œ ë° UTF-8 ì¸ì½”ë”©
        // Content-Type: text/html;charset=utf-8
        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");

        // HTML ì‘ë‹µ ì¶œë ¥
        PrintWriter writer = response.getWriter();
        writer.println("<html>");
        writer.println("<body>");
        writer.println("    <div>ì•ˆë…•?</div>");
        writer.println("</body>");
        writer.println("</html>");
    }
}
```

- HTTP ì‘ë‹µìœ¼ë¡œ HTMLì„ ë°˜í™˜í•  ë•ŒëŠ” content-typeì„ text/html ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.
- ì‹¤í–‰
  - [http://localhost:8080/response-html](http://localhost:8080/response-html)
  - í˜ì´ì§€ ì†ŒìŠ¤ë³´ê¸°ë¥¼ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ HTMLì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![](/assets/images/2025/2025-02-21-16-00-22.png)

![](/assets/images/2025/2025-02-21-16-01-09.png)

<br>

```
ì‘ë‹µ ë©”ì‹œì§€ì˜ ì‹œì‘ë¼ì¸(ìƒíƒœë¼ì¸)ì€ í¬í•¨í•˜ì§€ ì•Šì€ ì´ìœ ?
```

ì‹œì‘ë¼ì¸ì€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(Tomcat, Jetty ë“±)ì— ì˜í•´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê³  ì „ì†¡ë˜ê¸° ë•Œë¬¸ì—, ê°œë°œìê°€ ì§ì ‘ ì‹œì‘ë¼ì¸ì„ ì¶œë ¥í•˜ê±°ë‚˜ ì‘ì„±í•  í•„ìš”ê°€ ì—†ë‹¤!

ì»¨í…Œì´ë„ˆê°€ ê¸°ë³¸ì ìœ¼ë¡œ `HTTP/1.1 200 OK` ë“±ì˜ ìƒíƒœ ì •ë³´ë¥¼ í¬í•¨í•œ ì „ì²´ ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ì™„ì„±í•´ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.

<br>

### 6.1.2 HTTP ì‘ë‹µ ë°ì´í„° - API JSON

`hello.servlet.web.response.ResponseJsonServlet`

```java
package hello.servlet.basic.response;

/**
 * JSON ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì„œë¸”ë¦¿
 *
 * ìš”ì²­ ì˜ˆì‹œ:
 * - URL: http://localhost:8080/response-json
 */
@WebServlet(name = "responseJsonServlet", urlPatterns = "/response-json")
public class ResponseJsonServlet extends HttpServlet {

    private final ObjectMapper objectMapper = new ObjectMapper();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        // Content-Type ì„¤ì •: JSON ë° UTF-8 ì¸ì½”ë”©
        response.setHeader("Content-Type", "application/json");
        response.setCharacterEncoding("utf-8");

        // JSON ë°ì´í„° ìƒì„±
        HelloData data = new HelloData();
        data.setUsername("kim");
        data.setAge(20);

        // ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜
        String result = objectMapper.writeValueAsString(data);

        // JSON ì‘ë‹µ ì¶œë ¥
        response.getWriter().write(result);
    }
}
```

- HTTP ì‘ë‹µìœ¼ë¡œ JSONì„ ë°˜í™˜í•  ë•ŒëŠ” content-typeì„ `application/json` ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.
- Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” `objectMapper.writeValueAsString()` ë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ë¥¼ JSON ë¬¸ìë¡œ
  ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- ì‹¤í–‰
  - [http://localhost:8080/response-json](http://localhost:8080/response-json)

![](/assets/images/2025/2025-02-21-16-05-36.png)

<br>

> ì°¸ê³  (ì¤‘ìš”x)

- `application/json` ì€ ìŠ¤í™ìƒ utf-8 í˜•ì‹ì„ ì‚¬ìš©í•˜ë„ë¡ ì •ì˜ë˜ì–´ ìˆë‹¤. ê·¸ë˜ì„œ ìŠ¤í™ì—ì„œ charset=utf-8 ê³¼ ê°™ì€ ì¶”ê°€ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ë”°ë¼ì„œ `application/json` ì´ë¼ê³ ë§Œ ì‚¬ìš©í•´ì•¼ì§€`application/json;charset=utf-8` ì´ë¼ê³  ì „ë‹¬í•˜ëŠ” ê²ƒì€ ì˜ë¯¸ ì—†ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•œ ê²ƒì´ ëœë‹¤.
- `response.getWriter()`ë¥¼ ì‚¬ìš©í•˜ë©´ ì¶”ê°€ íŒŒë¼ë¯¸í„°ë¥¼ ìë™ìœ¼ë¡œ ì¶”ê°€í•´ë²„ë¦°ë‹¤. ì´ë•ŒëŠ”
- `response.getOutputStream()`ìœ¼ë¡œ ì¶œë ¥í•˜ë©´ ê·¸ëŸ° ë¬¸ì œê°€ ì—†ë‹¤

<br>
