---
title: "[Spring] ê¹€ì˜í•œ ìŠ¤í”„ë§ ê¸°ë³¸ ì •ë¦¬ #3 ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´2 - ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©"
categories: [Spring]
toc_label: Contents
toc: true
toc_sticky: true
author_profile: true
sidebar:
  nav: "counts"
---

<br>

---

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì ìš© í•´ë³´ê³ , IOC, DIë¥¼ ëª» ì§€í‚¤ëŠ” ë¬¸ì œì ì„ í•´ê²°í•´ë³´ì.

---

<br>

# 1. ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

- ê¸°ì¡´ì˜ ê³ ì • ê¸ˆì•¡ í• ì¸ ì •ì±…(FixDiscountPolicy) ëŒ€ì‹  **ì •ë¥  í• ì¸ ì •ì±…(RateDiscountPolicy)** ë¡œ ë³€ê²½í•˜ê³ ì í•˜ë©´ ì–´ë–»ê²Œ í• ê¹Œ?
- VIP íšŒì›ì—ê²Œ ì£¼ë¬¸ ê¸ˆì•¡ì˜ 10%ë¥¼ í• ì¸í•´ì£¼ëŠ” ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ë³´ì.

> RateDiscountPolicy ì¶”ê°€

ê°„ë‹¨í•˜ë‹¤. RateDiscountPolicy ë§Œ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤. ì´ê²ƒì´ ê°ì²´ ì§€í–¥ì˜ í˜

![](/assets/images/2025/2025-02-06-05-15-38.png)

<br>

> RateDiscountPolicy ì½”ë“œ

ê¸°ì¡´ì— ìƒì„±í•œ discount íŒ¨í‚¤ì§€ì— `RateDiscountPolicy` í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•´ì£¼ì.

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP){
            return price * discountPercent / 100;
        } else{
            return 0;
        }
    }
}
```

RateDiscountPolicyê°€ ì •ë§ 10% í• ì¸ì´ ì ìš©ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìƒì„±í•´ì„œ í™•ì¸í•´ë³´ì.

- í…ŒìŠ¤íŠ¸ ë‹¨ì¶•í‚¤
  - window: Ctrl + Shift + T
  - Mac: Command + Shift + T

![](/assets/images/2025/2025-02-06-05-31-34.png)

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;

class RateDiscountPolicyTest {

    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤.")
    void vip_o() {
        // given
        Member member = new Member(1L, "memberVIP", Grade.VIP);

        // when
        int discount = discountPolicy.discount(member, 10000);

        // then
        assertThat(discount).isEqualTo(1000);
    }

    @Test
    @DisplayName("VIPê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.")
    void vip_x() {
        // given
        Member member = new Member(2L, "memberBASIC", Grade.BASIC);

        // when
        int discount = discountPolicy.discount(member, 10000);

        // then
        assertThat(discount).isEqualTo(0);
    }
}
```

ì •ìƒì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br><br>

# 2. ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

> ë°©ê¸ˆ ì¶”ê°€í•œ í• ì¸ ì •ì±…ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©í•´ë³´ì.

í• ì¸ ì •ì±…ì„ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì¸ `OrderServiceImpl` ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

ê¸°ì¡´ì˜ OrderServiceImplì€ FixDiscountPolicyì— ì§ì ‘ ì˜ì¡´í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì—, RateDiscountPolicyë¡œ ë³€ê²½í•˜ë ¤ë©´ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í–ˆë‹¤.

```java
public class OrderServiceImpl implements OrderService{

   // private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
   private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

<br>

> ë¬¸ì œì 

â‘  DIP (Dependency Inversion Principle) ìœ„ë°˜

í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImplì´ ì¸í„°í˜ì´ìŠ¤(DiscountPolicy)ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´ í´ë˜ìŠ¤(FixDiscountPolicy, RateDiscountPolicy)ì—ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤.

![](/assets/images/2025/2025-02-06-05-47-11.png)

<br>

â‘¡ OCP(Open-Closed Principle) ìœ„ë°˜

í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ OrderServiceImplì€ DiscountPolicyì˜ ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì—, êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•  ë•Œ(í• ì¸ ì •ì±… ë³€ê²½) í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ(OrderServiceImpl)ë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤.

![](/assets/images/2025/2025-02-06-05-50-09.png)

<br>

> í•´ê²° ë°©ì•ˆ

DIPë¥¼ ìœ„ë°˜í•˜ì§€ ì•Šë„ë¡ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´(ì¶”ìƒì—ë§Œ ì˜ì¡´)í•˜ë„ë¡ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.

![](/assets/images/2025/2025-02-06-05-53-07.png)

```java
 public class OrderServiceImpl implements OrderService {
    //private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    private DiscountPolicy discountPolicy;
 }
```

ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„ì™€ ì½”ë“œë¥¼ ë³€ê²½í–ˆë‹¤.

```
ê·¸ëŸ°ë° êµ¬í˜„ì²´ê°€ ì—†ëŠ”ë° ì–´ë–»ê²Œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì„ê¹Œ?
```

ì‹¤ì œ ì‹¤í–‰ì„ í•´ë³´ë©´ NPE(null pointer exception)ê°€ ë°œìƒí•œë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImplì— DiscountPolicyì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤.

<br><br>

# 3. ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬â­

> ê°ì²´ì˜ ìƒì„±ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬í•˜ì—¬ ê° ê°ì²´ê°€ ìì‹ ì˜ ì—­í• ì—ë§Œ ì§‘ì¤‘í•˜ë„ë¡ í•œë‹¤.

- ì´ì „ ì½”ë“œëŠ” ë¡œë¯¸ì˜¤ ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì„ í•˜ëŠ” ë ˆì˜¤ë‚˜ë¥´ë„ ë””ì¹´í”„ë¦¬ì˜¤(êµ¬í˜„ì²´, ë°°ìš°)ê°€ ì¤„ë¦¬ì—£ ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì„ í•˜ëŠ” ì—¬ì ì£¼ì¸ê³µ(êµ¬í˜„ì²´, ë°°ìš°)ì„ ì§ì ‘ ì´ˆë¹™í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.
- ë”°ë¼ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ì—¬ ë°°ìš°(í´ë˜ìŠ¤)ëŠ” ì—°ê¸°ì—ë§Œ ì§‘ì¤‘í•˜ê³ , ë°°ìš° ì„­ì™¸ëŠ” ê³µì—° ê¸°íšì(AppConfig)ê°€ ë‹´ë‹¹í•˜ê²Œ í•´ì•¼í•œë‹¤.

<br>

## 3.1 AppConfig ë„ì…

> ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(config)í•˜ê¸° ìœ„í•´, **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•˜ê³ , **ì—°ê²°**í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì.

ê¸°ì¡´ì—” `MemberServiceImple`ì´ ì§ì ‘ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í–ˆë‹¤.

![](/assets/images/2025/2025-02-12-16-32-17.png)

![](/assets/images/2025/2025-02-06-06-28-23.png)

<br>

> ì´ì œëŠ” AppConfigë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì…í•œë‹¤.

AppConfigë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ìœ„ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•˜ì.

1. MemoryMemberRepository ì‚­ì œ
2. ìƒì„±ì ë§Œë“¤ê¸° (ë‹¨ì¶•í‚¤: Alt + Insert)

```tsx
package hello.core.member;

public class MemberServiceImpl implements MemberService{

    // 1. MemoryMemberRepository ì‚­ì œ
    private final MemberRepository memberRepository;

    // 2. ìƒì„±ì ë§Œë“¤ê¸°
    public MemberServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

<br>

ê·¸ í›„, `AppConfig` í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , `MemoryMemberRepository` êµ¬í˜„ ê°ì²´ë¥¼ ì„ íƒí•˜ì.

```java
package hello.core;

import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;

public class AppConfig {
    public MemberService memberService(){
        return new MemberServiceImpl(new MemoryMemberRepository());
    }
}
```

<br>

ë™ì‘ íë¦„ì€ ì•„ë˜ì™€ ê°™ë‹¤.

![](/assets/images/2025/2025-02-06-06-40-46.png)

<br>

> OrderServiceë„ ë§ˆì°¬ê°€ì§€ë‹¤.

![](/assets/images/2025/2025-02-06-06-47-46.png)

```java
public class AppConfig {
    public MemberService memberService(){
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService(){
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }
}
```

- ì¦‰, AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ
  **êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**í•œë‹¤.
  - MemberServiceImpl
  - MemoryMemberRepository
  - OrderServiceImpl
  - FixDiscountPolicy
- AppConfigëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°(ë ˆí¼ëŸ°ìŠ¤)ë¥¼ **ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)**í•´ì¤€ë‹¤
  - MemberServiceImpl -> MemberServiceImpl
  - OrderServiceImpl -> MemoryMemberRepository, FixDiscountPolicy

<br>

> MemberServiceImpl - ìƒì„±ì ì£¼ì…

```java
package hello.core.member;

public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    public void join(Member member) {
        memberRepository.save(member);
    }

    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

- ì„¤ê³„ ë³€ê²½ìœ¼ë¡œ MemberServiceImplì€ MemoryMemberRepositoryì„ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ë‹¨ì§€ MemberRepository ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤.
- MemberServiceImpl ì…ì¥ì—ì„œ ìƒì„±ìë¥¼ í†µí•´ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¬ì§€(ì£¼ì…ë ì§€)ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.
- MemberServiceImpl ì˜ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë¥¼ ì£¼ì…í• ì§€ëŠ” ì˜¤ì§ ì™¸ë¶€(AppConfig)ì—ì„œ ê²°ì •ëœë‹¤.
- MemberServiceImplì€ ì´ì œë¶€í„° ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€ì— ë§¡ê¸°ê³  ì‹¤í–‰ì—ë§Œ ì§‘ì¤‘í•˜ë©´ ëœë‹¤.

<br>

> í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![](/assets/images/2025/2025-02-06-07-06-33.png)

- ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ AppConfigê°€ ë‹´ë‹¹í•œë‹¤.
- DIP ì¤€ìˆ˜: MemberServiceImplì€ MemberRepositoryì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤. ì´ì œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ëª°ë¼ë„ ëœë‹¤.
- OCP ì¤€ìˆ˜: í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ(OrderServiceImpl)ë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ë‹¤.
- ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬: ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì—ˆë‹¤.

<br>

> íšŒì› ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![](/assets/images/2025/2025-02-06-07-08-39.png)

- appConfig ê°ì²´ëŠ” memoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImplì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ DI(Dependency Injection) ìš°ë¦¬ë§ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë˜ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤.

<br>

## 3.2 AppConfig ì‹¤í–‰

> ì‚¬ìš© í´ë˜ìŠ¤ - MemberApp

ê¸°ì¡´ì—” MemberServiceImplì„ ë©”ì¸ ë©”ì„œë“œì—ì„œ ì§ì ‘ ìƒì„±ì„ í•´ì¤¬ì§€ë§Œ, ì´ì œëŠ” appConfigë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ì„ í•˜ë©´ ëœë‹¤.

```java
package hello.core;

import hello.core.member.*;

public class MemberApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();

        MemberService memberService = appConfig.memberService();

        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

<br>

> ì‚¬ìš© í´ë˜ìŠ¤ - OrderApp

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.order.Order;
import hello.core.order.OrderService;

public class OrderApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
        OrderService orderService = appConfig.orderService();

        long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);
        Order order = orderService.createOrder(memberId, "itemA", 10000);

        System.out.println("order = " + order);
    }
}
```

<br>

> í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜¤ë¥˜ ìˆ˜ì •

```java
public class MemberServiceTest {

    MemberService memberService;

    // @BeforeEach: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ ë¨¼ì € ì‹¤í–‰
    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
    }

    @Test
    void join(){
        ...
    }
}
```

```java
public class OrderServiceTest {
    MemberService memberService;
    OrderService orderService;

    @BeforeEach
    public void beforeEach() {
        AppConfig appConfig = new AppConfig();
        memberService = appConfig.memberService();
        orderService = appConfig.orderService();
    }
    @Test
    void createOrder(){
        ...
    }
}
```

<br><br>

# 4. AppConfig ë¦¬íŒ©í„°ë§

> ê¸°ì¡´ì˜ AppConfig ì½”ë“œì—ëŠ” **ì¤‘ë³µ**ì´ ì¡´ì¬í•˜ê³ , **ì—­í• **ì— ë”°ë¥¸ **êµ¬í˜„**ì´ ëª…í™•íˆ ë“œëŸ¬ë‚˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆë‹¤.

```java
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(
            new MemoryMemberRepository(),
            new FixDiscountPolicy()
        );
    }
}
```

- ì¤‘ë³µ ë¬¸ì œ: `new MemoryMemberRepository()`ê°€ ë°˜ë³µë˜ê³  ìˆë‹¤.
- í™•ì¥ì„± ë¬¸ì œ: í• ì¸ ì •ì±… ë³€ê²½ ì‹œ ì—¬ëŸ¬ ê³³ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

<br>

> ë¦¬íŒ©í„°ë§ í›„ ì½”ë“œ

- MemoryMemberRepository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³„ë„ì˜ ë©”ì„œë“œë¡œ ì¶”ì¶œí•˜ì—¬ ì¤‘ë³µì„ ì œê±°í•˜ì—¬ ë¦¬íŒ©í† ë§ í•œë‹¤.
- ë‹¨ì¶•í‚¤
  - Window: Ctrl + Alt + M
  - Mac: Command + M
  - ì¤‘ë³µ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë“œë˜ê·¸ í•˜ì—¬ ìœ„ ë‹¨ì¶•í‚¤ë¥¼ ì…ë ¥í•˜ë©´ ëœë‹¤.<br><br>
    ![](/assets/images/2025/2025-02-12-19-52-32.png)

```java
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(
            memberRepository(),
            discountPolicy()
        );
    }

    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }
}
```

- ì—­í• (ì¸í„°í˜ì´ìŠ¤)ê³¼ êµ¬í˜„(êµ¬í˜„ í´ë˜ìŠ¤)ì´ í•œëˆˆì— ë³´ì´ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ êµ¬ì„±ì„ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.
- ìƒˆë¡œìš´ êµ¬í˜„ì²´ë¡œ ë³€ê²½ ì‹œ í•œ ê³³(AppConfig)ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.

<br><br>

# 5. ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- ê¸°ì¡´ì˜ ì •ì•¡ í• ì¸ ì •ì±…ì„ ì •ë¥ % í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ë³´ì.
- `FixDiscountPolicy` -> `RateDiscountPolicy`

> í• ì¸ ì •ì±… ë³€ê²½ ì‹œ ì˜í–¥

ê¸°ì¡´ì˜ FixDiscountPolicyì—ì„œ RateDiscountPolicyë¡œ ë³€ê²½í•˜ëŠ” ê²½ìš°

ë³€ê²½ ì „ ì½”ë“œ

```java
public DiscountPolicy discountPolicy() {
    return new FixDiscountPolicy();
}
```

<br>

ë³€ê²½ í›„ ì½”ë“œ

```java
public DiscountPolicy discountPolicy() {
     // return new FixDiscountPolicy();
    return new RateDiscountPolicy();
}
```

ì´ì œ í• ì¸ ì •ì±…ì„ ë³€ê²½í•´ë„, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ êµ¬ì„± ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” AppConfigë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤. í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì¸ `OrderServiceImpl`ë¥¼ í¬í•¨í•´ì„œ ì‚¬ìš© ì˜ì—­ì˜ ì–´ë–¤ ì½”ë“œë„ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤.

<br>

> êµ¬ì„±ê³¼ ì‚¬ìš©ì˜ ë¶„ë¦¬

- êµ¬ì„± ì˜ì—­(AppConfig): ê°ì²´ ìƒì„± ë° ì—°ê²° ë‹´ë‹¹
- ì‚¬ìš© ì˜ì—­(OrderServiceImpl ë“±): ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹

ì´ì²˜ëŸ¼ êµ¬ì„±ê³¼ ì‚¬ìš©ì„ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ í• ì¸ ì •ì±…ì´ë‚˜ ì €ì¥ì†Œ ë“±ì˜ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•  ë•Œ ì‚¬ìš© ì˜ì—­ì˜ ì½”ë“œë¥¼ ê±´ë“œë¦¬ì§€ ì•Šê³ ë„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

<br>

> ê²°ë¡ 

- AppConfigë¥¼ ê³µì—°ì˜ ê¸°íšìì— ë¹„ìœ í•˜ë©´, ê¸°íšìëŠ” ê° ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì— ì–´ë–¤ ë°°ìš°(êµ¬í˜„ í´ë˜ìŠ¤)ê°€ ì°¸ì—¬í• ì§€ ë¯¸ë¦¬ ì„¤ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
- ì´ êµ¬ì¡° ë•ë¶„ì—, ë°°ìš°(êµ¬í˜„ì²´)ë¥¼ ë°”ê¾¸ë”ë¼ë„ ê³µì—°(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ì€ ê·¸ëŒ€ë¡œ ì§„í–‰ë  ìˆ˜ ìˆë‹¤.

ë¦¬íŒ©í„°ë§ì„ í†µí•´ í™•ì¥ì„±, ìœ ì§€ë³´ìˆ˜ì„±ì´ ë†’ì•„ì§€ê³ , ë³€ê²½ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ê°€ ì™„ì„±ëœë‹¤.

<br><br>

# 6. ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©

## 6.1 SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™

> í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.

- í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì§ì ‘ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ê³ , ì‹¤í–‰í•˜ëŠ” ë‹¤ì–‘í•œ ì±…ì„ì„ ê°€ì§€ê³  ìˆë‹¤.
- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ë©´ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ê³„í•˜ì—¬ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œë‹¤.
- êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì±…ì„ì€ AppConfigê°€ ë‹´ë‹¹, í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ë‹´ë‹¹

<br>

## 6.2 DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™

> í”„ë¡œê·¸ë˜ë¨¸ëŠ” "ìƒìœ„ ê³„ì¸µ(ì¶”ìƒí™”, ì¸í„°í˜ì´ìŠ¤)ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”(êµ¬í˜„ í´ë˜ìŠ¤)ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤." ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.

- í•˜ìœ„ ê³„ì¸µ(êµ¬ì²´ì ì¸ êµ¬í˜„ í´ë˜ìŠ¤)ì´ ìƒìœ„ ê³„ì¸µ(ì¸í„°í˜ì´ìŠ¤)ì— ì˜ì¡´í•˜ë„ë¡ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ëŠ” ì›ì¹™ì´ë‹¤.
- ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ê°œë°œí•˜ê³ , ì ìš©í•˜ë ¤ê³  í•˜ë‹ˆ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í–ˆë‹¤. ì™œëƒí•˜ë©´ ê¸°ì¡´ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ(`OrderServiceImpl`) ëŠ” DIPë¥¼ ì§€í‚¤ë©° `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ê²ƒ ê°™ì•˜ì§€ë§Œ, `FixDiscountPolicy`êµ¬ì²´í™” êµ¬í˜„ í´ë˜ìŠ¤ì—ë„ í•¨ê»˜ ì˜ì¡´í–ˆê¸° ë•Œë¬¸ì´ë‹¤.
- ë”°ë¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œê°€ `DiscountPolicy` ì¶”ìƒí™” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í–ˆë‹¤.
- í•˜ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œìœ¼ë¡œëŠ” ì•„ë¬´ê²ƒë„ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.
- ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê²Œ ìœ„í•´ AppConfigê°€ `FixDiscountPolicy`ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ëŒ€ì‹  ìƒì„±í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í–ˆë‹¤.

<br>

## 6.3 OCP

> ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” **í™•ì¥**ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ **ë³€ê²½**ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.

- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš© ì˜ì—­ê³¼ êµ¬ì„± ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆˆë‹¤.
- AppConfigê°€ ì˜ì¡´ê´€ê³„ë¥¼ `FixDiscountPolicy` -> `RateDiscountPolicy`ë¡œ ë³€ê²½í•´ì„œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ë¯€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
- ì¦‰, ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆëŠ” ê²ƒì´ë‹¤.

<br><br>

# 7. IoC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ

## 7.1 ì œì–´ì˜ ì—­ì „ (IoC, Inversion of Control)

> **í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ "ì œì–´ì˜ ì—­ì „(IoC)"**ì´ë¼ê³  í•œë‹¤.

- ê¸°ì¡´ í”„ë¡œê·¸ë¨ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸(ì‚¬ìš©ì)ê°€ í•„ìš”í•œ ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ê³ , ì‹¤í–‰í•˜ê³ , ì—°ê²°í•˜ì˜€ë‹¤.
- í•˜ì§€ë§Œ IoCì—ì„œëŠ” ê°ì²´ ìƒì„±ê³¼ ì‹¤í–‰ì˜ ì œì–´ê¶Œì´ ê°œë°œìê°€ ì•„ë‹ˆë¼ ì™¸ë¶€(AppConfig)ì—ì„œ ê´€ë¦¬ëœë‹¤.
  - e.g., `OrderServiceImpl`ì€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ë¥¼ í˜¸ì¶œí•˜ì§€ë§Œ, ì‹¤ì œ ì–´ë–¤ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í• ì§€ëŠ” ëª¨ë¦„
- í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì œì–´ íë¦„ì€ ëª¨ë‘ AppConfigê°€ ê°€ì§€ê³  ìˆë‹¤. AppConfigê°€ ì‹¤í–‰ íë¦„ì„ ì œì–´í•˜ê³  í•„ìš”í•œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì£¼ì…í•œë‹¤.
- ì´ë ‡ë“¯ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ **ì œì–´ì˜ ì—­ì „(IoC)**ì´ë¼ í•œë‹¤.

<br>

> í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬

- í”„ë ˆì„ì›Œí¬: í”„ë ˆì„ì›Œí¬ê°€ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³  ì‹¤í–‰ (JUnitì´ ëŒ€í‘œì ì¸ ì˜ˆ)
- ë¼ì´ë¸ŒëŸ¬ë¦¬: ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹

<br>

## 7.2 ì˜ì¡´ê´€ê³„ ì£¼ì… DI (Dependency Injection)

- `OrderServiceImpl`ì€ `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜ì¡´í•˜ì§€ë§Œ, ì–´ë–¤ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í• ì§€ëŠ” ëª¨ë¥¸ë‹¤.
- ì˜ì¡´ê´€ê³„ëŠ” ì •ì ì¸ ì˜ì¡´ ê´€ê³„ì™€, ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„ ë‘˜ì„ ë¶„ë¦¬í•´ì„œ ìƒê°í•´ì•¼í•œë‹¤.

<br>

> ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„

- â­ í´ë˜ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” import ì½”ë“œë§Œ ë³´ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ íŒë‹¨í•  ìˆ˜ ìˆë‹¤.
- ì •ì ì¸ ì˜ì¡´ê´€ê³„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ì§€ ì•Šì•„ë„ ë¶„ì„ì´ ê°€ëŠ¥í•˜ë‹¤.
- ì•„ë˜ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì„ ë³´ë©´ `OrderServiceImpl`ì€ `MemberRepository`, `DiscountPolicy`ì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.<br><br>![](/assets/images/2025/2025-02-12-21-06-12.png)

ê·¸ëŸ°ë° ì´ëŸ¬í•œ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ ë§Œìœ¼ë¡œëŠ” ì‹¤ì œ ì–´ë–¤ ê°ì²´ê°€ `OrderServiceImpl`ì— ì£¼ì… ë ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.

<br>

> ë™ì ì¸ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤) ì˜ì¡´ ê´€ê³„

ì• í”Œë¦¬ì¼€ì´ì…˜ **ì‹¤í–‰ ì‹œì **(ëŸ°íƒ€ì„)ì— ì‹¤ì œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡°ê°€ ì—°ê²°ëœ ì˜ì¡´ ê´€ê³„ë‹¤.

![](/assets/images/2025/2025-02-12-21-05-52.png)

- ì¦‰, AppConfigê°€ ì‹¤í–‰ë  ë•Œ ì–´ë–¤ êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í• ì§€ ê²°ì •ë˜ëŠ”ë°, ì´ ê³¼ì •ì„ **"ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)"** ì´ë¼ê³  í•œë‹¤!
- ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ê·¸ ì°¸ì¡°ê°’ì„ ì „ë‹¬í•´ì„œ ì—°ê²°ëœë‹¤.
- DIë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œ ë³€ê²½ ì—†ì´ë„ ì‹¤í–‰ ì‹œì ì— ì£¼ì…í•  ê°ì²´ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- â­ ì˜ì¡´ê´€ê³„ ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ë™ì ì¸ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

<br>

## 7.3 IoC ì»¨í…Œì´ë„ˆ & DI ì»¨í…Œì´ë„ˆ

> AppConfigì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ”ê²ƒì„ IoC ì»¨í…Œì´ë„ˆ ë˜ëŠ” DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

- ìµœê·¼ì—ëŠ” ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ì–´ "DI ì»¨í…Œì´ë„ˆ"ë¼ëŠ” ìš©ì–´ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.
- ë˜ëŠ” ì–´ìƒ˜ë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ ë“±ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.

<br><br>

# 8. ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°

> ì§€ê¸ˆê¹Œì§€ ìˆœìˆ˜í•œ ìë°” ì½”ë“œë§Œìœ¼ë¡œ DIë¥¼ ì ìš©í–ˆë‹¤. ë“œë””ì–´!! ìŠ¤í”„ë§ì„ ì‚¬ìš©í•´ë³´ì!

- ê¸°ì¡´ì—ëŠ” ìˆœìˆ˜ ìë°” ì½”ë“œë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DI(ì˜ì¡´ê´€ê³„ ì£¼ì…)ë¥¼ ê´€ë¦¬í–ˆì§€ë§Œ, **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ(ApplicationContext)**ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ ìƒì„± ë° ì˜ì¡´ê´€ê³„ ê´€ë¦¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë€ ìŠ¤í”„ë§ì—ì„œ ìë°” ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê³µê°„ì„ ë§í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ìë°” ê°ì²´ë¥¼ ë¹ˆ(Bean)ì´ë¼ í•œë‹¤.

<br>

## 8.1 AppConfig ìŠ¤í”„ë§ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½

- AppConfigì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `Configuration`ì„ ë¶™ì—¬ì¤€ë‹¤.
- ê° ë©”ì„œë“œì— `@Bean`ì„ ë¶™ì—¬ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— **ìŠ¤í”„ë§ ë¹ˆ**ìœ¼ë¡œ ë“±ë¡í•œë‹¤.
- `memberService()`, `discountPolicy()` ë“±ì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ë„ë¡ ë³€ê²½í•œ ê²ƒì´ë‹¤.

```java
@Configuration
public class AppConfig {
    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        return new RateDiscountPolicy();
    }
}
```

<br>

## 8.2 MemberAppì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì ìš©

- ê¸°ì¡´ AppConfigë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë˜ ë°©ì‹ ëŒ€ì‹  ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ(ApplicationContext)ë¥¼ í†µí•´ ë¹ˆì„ ì¡°íšŒí•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ (ApplicationContext)ëŠ” `@Bean` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œ ëª¨ë“  ê°ì²´ë“¤ì„ ê´€ë¦¬í•œë‹¤.

```java
public class MemberApp {
    public static void main(String[] args) {
        // AppConfig appConfig = new AppConfig();
        // MemberService memberService = appConfig.memberService();

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆ(ê°ì²´) ì¡°íšŒ
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        // í…ŒìŠ¤íŠ¸
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```

<br>

## 8.3 OrderAppì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì ìš©

- ApplicationContextë¥¼ ì´ìš©í•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ í•„ìš”í•œ ê°ì²´(ë¹ˆ)ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•œë‹¤.

```java
public class OrderApp {
    public static void main(String[] args) {
        // AppConfig appConfig = new AppConfig();
        // MemberService memberService = appConfig.memberService();
        // OrderService orderService = appConfig.orderService();

        // ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);

        // ë¹ˆ ì¡°íšŒ
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);
        OrderService orderService = applicationContext.getBean("orderService", OrderService.class);

        // í…ŒìŠ¤íŠ¸
        long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);
        System.out.println("order = " + order);
    }
}
```

<br>

## 8.4 ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ

> ` ApplicationContext`ì„ **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ**ë¼ í•œë‹¤.

- ê¸°ì¡´ì—ëŠ” AppConfigê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DI(ì˜ì¡´ê´€ê³„ ì„¤ì •)í–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `Configuration`ì´ ë¶™ì€ AppConfigë¥¼ ì„¤ì •(êµ¬ì„±)ì •ë³´ë¡œ ì‚¬ìš©í•˜ë©°, ì—¬ê¸°ì„œ `@Bean`ì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ **ëª¨ë‘ í˜¸ì¶œ**í•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤.

> ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ **ìŠ¤í”„ë§ ë¹ˆ**ì´ë¼ í•œë‹¤.

- ìŠ¤í”„ë§ ë¹ˆì€ `@Bean`ì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. (
  `memberService`, `orderService`)
- ì´ì „ì—ëŠ” ê°œë°œìê°€ í•„ìš”í•œ ê°ì²´ë¥¼ `AppConfig`ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ì¡°íšŒí–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.
- ìŠ¤í”„ë§ ë¹ˆì€ `applicationContext.getBean()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìˆë‹¤.
- ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ ì§ì ‘ ìë°”ì½”ë“œë¡œ ëª¨ë“  ê²ƒì„ í–ˆë‹¤ë©´ ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ëœ ê²ƒì´ë‹¤.

<br>

## 8.5 ìŠ¤í”„ë§ ë¶€íŠ¸ 3.1 ì´ìƒ - ë¡œê·¸ ì¶œë ¥ ì•ˆë˜ëŠ” ë¬¸ì œ í•´ê²°

> `MemberApp`ê³¼ `OrderApp`ì„ ì‹¤í–‰í•  ë•Œ, ìŠ¤í”„ë§ ë¶€íŠ¸ 3.1 ì´ìƒì„ ì‚¬ìš©í•œë‹¤ë©´ ë¡œê·¸ê°€ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.

- Spring Boot 3.1ë¶€í„° ê¸°ë³¸ ë¡œê·¸ ë ˆë²¨ì´ INFOë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ì„œ DEBUG ë ˆë²¨ ë¡œê·¸ê°€ ì¶œë ¥ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.
- `logback.xml` íŒŒì¼ì„ ì¶”ê°€í•˜ì—¬ ë¡œê·¸ ë ˆë²¨ì„ DEBUGë¡œ ë³€ê²½í•˜ì—¬ í•´ê²°í•˜ë©´ ëœë‹¤.
- ğŸ“Œ logback.xml ì„¤ì • íŒŒì¼ (`src/main/resources/logback.xml`)

```xml
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
    <root level="DEBUG">
        <appender-ref ref="STDOUT" />
    </root>
</configuration>

```

![](/assets/images/2025/2025-02-12-22-42-29.png)

<br>

## 8.6 ğŸ“Œ ìµœì¢… ì •ë¦¬

| ë³€ê²½ ì „ (ìˆœìˆ˜ ìë°” ì½”ë“œ)                                             | ë³€ê²½ í›„ (ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì‚¬ìš©)                                    |
| -------------------------------------------------------------------- | ----------------------------------------------------------------- |
| ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬ (`new` ì‚¬ìš©)                      | ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬                            |
| `AppConfig`ì—ì„œ ì§ì ‘ ê°ì²´ ë°˜í™˜ (`memberService()`, `orderService()`) | `@Configuration` + `@Bean`ì„ ì‚¬ìš©í•´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡            |
| `AppConfig`ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì—¬ ê°ì²´ ì‚¬ìš©                                | `ApplicationContext.getBean()`ì„ í†µí•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆ ì¡°íšŒ |

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ ê°ì²´ ê´€ë¦¬ê°€ ìë™í™”ë˜ê³ , ì˜ì¡´ê´€ê³„ê°€ ëª…í™•í•´ì§€ë©°, DI(ì˜ì¡´ì„± ì£¼ì…)ë„ ì‰½ê²Œ ì ìš© ê°€ëŠ¥í•˜ë‹¤.
- ì½”ë“œê°€ ì¡°ê¸ˆ ë³µì¡í•´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì´ í›¨ì”¬ ì¢‹ì•„ì§„ë‹¤.

<br>
